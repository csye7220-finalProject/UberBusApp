(this["webpackJsonpuber-bus-app"]=this["webpackJsonpuber-bus-app"]||[]).push([[0],{129:function(e,t,s){},239:function(e,t,s){},550:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),o=s(17),r=s.n(o),c=(s(239),s(240),s(65),s(12)),i=s(16),l=s(7),d=s(8),u=s(13),h=s(11),b=s(10),m=s(92),g=s.n(m),j=(s(135),s(136),s(137),s(90)),p=s.n(j),O=s(28),f=s.n(O),v="http://ad5f8402a31d1430ba79fe66b89f65be-1681252358.us-west-2.elb.amazonaws.com:5000/app/",x=v;var y={headers:{Authorization:"Bearer "+function(){if("undefined"!==typeof Storage)try{return JSON.parse(localStorage.getItem("twtr:auth")).access}catch(e){console.log(e)}}()}},k=function(e){return f.a.post(x+"getbookings",{email:localStorage.getItem("email")},y).then((function(e){return console.log("Try"),console.log(e),e})).catch((function(e){console.log("Catch"),console.log(e)}))},S=function(e){return f.a.post(x+"getbuses",{}).then((function(e){return console.log("Try"),console.log(e),e})).catch((function(e){console.log("Catch"),console.log(e)}))},N=function(e){return f.a.post(x+"allbookings",{}).then((function(e){return console.log("Try"),console.log(e),e})).catch((function(e){console.log("Catch"),console.log(e)}))},w=s(0),C=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={show:!1},a.toggleMenu=a.toggleMenu.bind(Object(u.a)(a)),console.log(a.state.show),a}return Object(d.a)(s,[{key:"toggleMenu",value:function(){this.setState({show:!this.state.show})}},{key:"render",value:function(){c.b,localStorage.fname,this.toggleMenu,this.state.show,c.b,c.b,c.b,c.b,c.b,this.toggleMenu,this.state.show,c.b,c.b;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("nav",{class:"navbar navbar-expand-md navbar-dark bg-dark mb-3 fixed-top",children:Object(w.jsxs)("div",{className:"container-fluid",children:[Object(w.jsxs)(c.b,{className:"navbar-brand mr-3",to:"/home",children:[Object(w.jsx)("img",{src:"static/bus1.png",alt:"",width:"50px",height:"50px"})," "]}),Object(w.jsxs)("h3",{className:"navbar-brand mr-3",children:[" ","Hi ",localStorage.fname]}),Object(w.jsx)("button",{type:"button",class:"navbar-toggler",onClick:this.toggleMenu,children:Object(w.jsx)("span",{className:"navbar-toggler-icon"})}),Object(w.jsx)("div",{style:this.state.show?{display:"block"}:{display:"none"},className:"collapse navbar-collapse",children:Object(w.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(w.jsx)(c.b,{className:"nav-item nav-link",to:"/addBus",children:Object(w.jsx)("h4",{children:"Add Bus"})}),Object(w.jsx)(c.b,{className:"nav-item nav-link",to:"/viewBuses",children:Object(w.jsx)("h4",{children:"View Buses"})}),Object(w.jsx)(c.b,{className:"nav-item nav-link",to:"/all-bookings",children:Object(w.jsx)("h4",{children:"View Bookings"})}),Object(w.jsx)(c.b,{className:"nav-item nav-link",to:"/logout",children:Object(w.jsx)("h4",{children:"Logout"})})]})})]})})})}}]),s}(a.Component),I=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={show:!1,isAdmin:!1,isLoggedIn:!1},a.toggleMenu=a.toggleMenu.bind(Object(u.a)(a)),console.log(a.state.show),a}return Object(d.a)(s,[{key:"toggleMenu",value:function(){this.setState({show:!this.state.show})}},{key:"componentDidMount",value:function(){"admin"===localStorage.fname&&(console.log("Inside is Admin"),this.setState({isAdmin:!0})),1==localStorage.isLoggedIn&&(console.log("Inside is logged in"),this.setState({isLoggedIn:!0}))}},{key:"render",value:function(){var e=Object(w.jsx)("nav",{class:"navbar navbar-expand-md navbar-dark bg-dark mb-3 fixed-top",children:Object(w.jsxs)("div",{className:"container-fluid",children:[Object(w.jsxs)(c.b,{className:"navbar-brand mr-3",to:"/home",children:[Object(w.jsx)("img",{src:"static/bus1.png",alt:"",width:"50px",height:"50px"})," "]}),Object(w.jsxs)("h3",{className:"navbar-brand mr-3",children:[" ","Hi ",localStorage.fname]}),Object(w.jsx)("button",{type:"button",class:"navbar-toggler",onClick:this.toggleMenu,children:Object(w.jsx)("span",{className:"navbar-toggler-icon"})}),Object(w.jsx)("div",{style:this.state.show?{display:"block"}:{display:"none"},className:"collapse navbar-collapse",children:Object(w.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(w.jsx)(c.b,{className:"nav-item nav-link",to:"/view-bookings",children:Object(w.jsx)("h4",{children:"View Bookings"})}),Object(w.jsx)(c.b,{className:"nav-item nav-link",to:"/home",children:Object(w.jsx)("h4",{children:"Home"})}),Object(w.jsx)(c.b,{className:"nav-item nav-link",to:"/logout",children:Object(w.jsx)("h4",{children:"Logout"})})]})})]})}),t=Object(w.jsx)("nav",{class:"navbar navbar-expand-md navbar-dark bg-dark mb-3 fixed-top",children:Object(w.jsxs)("div",{className:"container-fluid",children:[Object(w.jsxs)(c.b,{className:"navbar-brand mr-3",to:"/home",children:[Object(w.jsx)("img",{src:"static/bus1.png",alt:"",width:"50px",height:"50px"})," "]}),Object(w.jsx)("button",{type:"button",className:"navbar-toggler",onClick:this.toggleMenu,children:Object(w.jsx)("span",{className:"navbar-toggler-icon"})}),Object(w.jsx)("div",{style:this.state.show?{display:"block"}:{display:"none"},className:"collapse navbar-collapse",children:Object(w.jsxs)("div",{className:"navbar-nav ml-auto ",children:[Object(w.jsx)(c.b,{className:"nav-item nav-link",to:"/sign-in",children:"Login"}),Object(w.jsx)(c.b,{className:"nav-item nav-link",to:"/sign-up",children:"Sign up"})]})})]})});return Object(w.jsx)(w.Fragment,{children:this.state.isAdmin&&localStorage.isLoggedIn?Object(w.jsx)(C,{}):localStorage.isLoggedIn?e:t})}}]),s}(a.Component),D=s(233),B=s(93),T=s.n(B),M=(s(270),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"pin-text",children:this.props.text}),Object(w.jsx)("div",{className:"pin"})]})}}]),s}(a.Component)),L=(s(271),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={source:"Select Source",destination:"Select Destination",operator:"",operatorsList:[],date:"",time:0,enable:!0,success:"",noTiketsMessage:"The Bus is full",marker_path:[],source_lat:0,source_lng:0,dest_lat:0,dest_lng:0,google:0,flightPath:0,temp:0,errors:{source:"",destination:"",operator:"",date:"",submit:""}},T.a.setApiKey("AIzaSyArSiBGE5n217Fcd9N59Y6yIynN6gyVSzM"),a.handleDateChange=a.handleDateChange.bind(Object(u.a)(a)),a.getOperator=a.getOperator.bind(Object(u.a)(a)),a.handleSourceChange=a.handleSourceChange.bind(Object(u.a)(a)),a.handleDestinationChange=a.handleDestinationChange.bind(Object(u.a)(a)),a.handleOperatorChange=a.handleOperatorChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleTimeChange=a.handleTimeChange.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"handleTimeChange",value:function(e){console.log(e),this.setState({time:e})}},{key:"componentDidMount",value:function(){null===localStorage.getItem("isLoggedIn")&&this.props.history.push("/")}},{key:"handleSourceChange",value:function(e){this.setState({source:e.target.value,date:"",operator:"",success:"",errors:{source:"",destination:"",submit:""}})}},{key:"handleSourceMarker",value:function(e){console.log("inside"),this.state.flightPath&&this.state.flightPath.setMap(null),e&&this.sourceHandler(e)}},{key:"handleDateChange",value:function(e){"Select Source"===this.state.source?this.setState({errors:{source:"Source cannot be empty",destination:""}}):"Select Destination"===this.state.destination?this.setState({errors:{source:"",destination:"Destionation cannot be empty"}}):(console.log("Value"),console.log(e),this.setState({date:new Date(e),operatorsList:[],operator:"",errors:{source:"",destination:""}}),console.log("Check"),console.log(this.state.date))}},{key:"getOperator",value:function(e){var t=this;e.preventDefault(),console.log("Get Operator"),console.log(this.state.date),function(e){return f.a.post(x+"getoperator",{source:e.source,destination:e.destination,date:e.date}).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e),e}))}({source:this.state.source,destination:this.state.destination,date:this.state.date}).then((function(e){if(200===e.status)if("No operators has seats available"===e.data.message||"No operators found"===e.data.message)console.log("Operator data1"),console.log(e.data),t.setState({operatorsList:[],enable:!0,errors:{source:"",destination:"",operator:"No operators has seats available. Select another date.",submit:""}});else{console.log("Operator data2"),console.log(e.data);var s=Object.keys(e.data).length;console.log(s),s<1?t.setState({operatorsList:[],enable:!0,errors:{operator:"No operator found",submit:""}}):(t.setState({enable:!1}),t.setState({operatorsList:e.data,operator:e.data[0].name+"/"+e.data[0].bustime,errors:{source:"",destination:"",operator:""}}))}}))}},{key:"handleDestinationChange",value:function(e){"Select Source"===this.state.source?this.setState({errors:{source:"Source cannot be empty",destination:""}}):this.state.source===e.target.value?this.setState({errors:{source:"",destination:"Destination cannot be same as source"}}):this.setState({destination:e.target.value,date:"",operator:"",errors:{source:"",destination:""}}),this.handleDestinationMarker(e.target.value)}},{key:"handleOperatorChange",value:function(e){console.log(e.target.key),this.setState({operator:e.target.value}),console.log("Operator Change:",this.state.operator)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(""),console.log(this.state.date),console.log(this.state.operator);var s="Select Source",a="Select Destination",n="",o="";if(this.state.source===s||this.state.destination===a||this.state.date===n||this.state.operator===o)this.setState({errors:{submit:"Select all the required fields"}});else{var r={email:localStorage.getItem("email"),source:this.state.source,destination:this.state.destination,date:this.state.date,operator:this.state.operator};console.log(r),function(e){return console.log("config"),console.log(y),f.a.post(x+"addbooking",{email:e.email,source:e.source,destination:e.destination,date:e.date,operator:e.operator},y).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))}(r).then((function(e){if(200===e.status)if("Operator not available"===e.data.message)t.setState({error:{source:"",destination:"",operator:e.data.message,operatorsList:[],submit:e.data.message}});else{var s=Object.keys(e.data).length;console.log(s),s<1&&t.setState({error:{source:"",destination:"",operator:"",operatorsList:[],submit:"No buses found"}}),t.setState({source:"Select Source",destination:"Select Destination",operator:"",operatorsList:[],date:"",marker_path:[],source_lat:0,source_lng:0,dest_lat:0,dest_lng:0,google:t.state.temp,flightPath:t.state.flightPath.setMap(null),enable:!0}),setTimeout((function(){return t.setState({success:"Booking done successfully"})}),1e3)}}))}}},{key:"sourceHandler",value:function(e){var t=this;T.a.fromAddress(e).then((function(e){var s=t.state.marker_path[0]=e.results[0].geometry.location,a=s.lat,n=s.lng;if(t.setState({source_lat:a,source_lng:n,marker_path:t.state.marker_path}),t.state.marker_path.length>1){t.setState({google:t.state.temp});var o=new t.state.google.maps.Polyline({path:t.state.marker_path,geodesic:!0,strokeColor:"red",strokeOpacity:1,strokeWeight:3});t.state.flightPath&&t.state.flightPath.setMap(null),o.setMap(t.state.google.map),t.setState({flightPath:o})}}),(function(e){console.error(e)}))}},{key:"destinationHandler",value:function(e){var t=this;T.a.fromAddress(e).then((function(e){var s=t.state.marker_path[1]=e.results[0].geometry.location,a=s.lat,n=s.lng;if(t.setState({dest_lat:a,dest_lng:n,marker_path:t.state.marker_path}),t.state.marker_path.length>1){t.setState({google:t.state.temp});var o=new t.state.google.maps.Polyline({path:t.state.marker_path,geodesic:!0,strokeColor:"red",strokeOpacity:1,strokeWeight:3});t.state.flightPath&&t.state.flightPath.setMap(null),o.setMap(t.state.google.map),t.setState({flightPath:o})}}),(function(e){console.error(e)}))}},{key:"handleDestinationMarker",value:function(e){this.state.flightPath&&(this.state.flightPath.setMap(null),this.state.flightPath.setPath([]),this.state.flightPath=null),e&&this.destinationHandler(e)}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I,{}),Object(w.jsx)("div",{className:"container m-auto marginconatiner",children:Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col-xs-6 col-md-6",children:Object(w.jsx)("div",{className:"jumbotron",children:Object(w.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(w.jsx)("h3",{children:"Bus Ticket Booking"}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsxs)("select",{className:"custom-select",value:this.state.source,onChange:function(t){e.handleSourceChange(t),e.handleSourceMarker(t.target.value)},required:!0,children:[Object(w.jsx)("option",{value:"destination",children:"Select Source"}),Object(w.jsx)("option",{value:"Boston",children:"Boston"}),Object(w.jsx)("option",{value:"New York",children:"New York"}),Object(w.jsx)("option",{value:"Pittsburgh",children:"Pittsburgh"}),Object(w.jsx)("option",{value:"Vermont",children:"Vermont"}),Object(w.jsx)("option",{value:"Maine",children:"Maine"})]}),""!==this.state.errors.source&&Object(w.jsx)("span",{className:"error",children:this.state.errors.source})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsxs)("select",{className:"custom-select",value:this.state.destination,onChange:function(t){e.handleDestinationChange(t),e.handleDestinationMarker(t.target.value)},required:!0,children:[Object(w.jsx)("option",{value:"destination",children:"Select Destination"}),Object(w.jsx)("option",{value:"Boston",children:"Boston"}),Object(w.jsx)("option",{value:"New York",children:"New York"}),Object(w.jsx)("option",{value:"Pittsburgh",children:"Pittsburgh"}),Object(w.jsx)("option",{value:"Vermont",children:"Vermont"}),Object(w.jsx)("option",{value:"Maine",children:"Maine"})]}),""!==this.state.errors.destination&&Object(w.jsx)("span",{className:"error",children:this.state.errors.destination})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)(g.a,{className:"custom-select",value:this.state.date,selected:this.state.date,onChange:this.handleDateChange,minDate:p()().toDate(),required:!0}),""!==this.state.errors.date&&Object(w.jsx)("span",{className:"error",children:this.state.errors.date}),Object(w.jsx)("button",{onClick:this.getOperator,className:"btn btn-secondary btn-block",children:"Get Operators"}),Object(w.jsx)("select",{id:"operator",className:"custom-select",value:this.state.operator,onChange:this.handleOperatorChange,disabled:this.state.enable,required:!0,children:Object.keys(this.state.operatorsList).map((function(t,s){return e.state.operatorsList[s].quantity>=1?Object(w.jsx)("option",{value:e.state.operatorsList[s].name+"/"+e.state.operatorsList[s].bustime,children:e.state.operatorsList[s].name+" "+e.state.operatorsList[s].bustime},s):null}))}),""!==this.state.errors.operator&&Object(w.jsx)("span",{className:"error",children:this.state.errors.operator})]}),Object(w.jsx)("button",{type:"submit",className:"btn btn-secondary btn-block",value:"Submit",children:"Book"}),""!==this.state.errors.submit&&Object(w.jsx)("span",{className:"error",children:this.state.errors.submit}),""!==this.state.success&&Object(w.jsx)("span",{className:"success",children:this.state.success})]})})}),Object(w.jsx)("div",{class:"col-xs-6 col-md-6",children:Object(w.jsx)("div",{className:"iframe-container",children:Object(w.jsx)("div",{children:Object(w.jsxs)(D.a,{bootstrapURLKeys:{key:"AIzaSyArSiBGE5n217Fcd9N59Y6yIynN6gyVSzM"},defaultCenter:{lat:42.361145,lng:-71.057083},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){return e.setState({google:t,temp:t})},defaultZoom:5,children:[this.state.source&&this.state.source_lat&&this.state.source_lng&&Object(w.jsx)(M,{lat:this.state.source_lat,lng:this.state.source_lng,text:"S"}),this.state.destination&&this.state.dest_lat&&this.state.dest_lng&&Object(w.jsx)(M,{lat:this.state.dest_lat,lng:this.state.dest_lng,text:"D"})]})})})})]})})]})}}]),s}(a.Component)),P=s(35),E=v;var q={headers:{Authorization:"Bearer "+function(){if("undefined"!==typeof Storage)try{return JSON.parse(localStorage.getItem("twtr:auth")).access}catch(e){console.log(e)}}()}},_=RegExp(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/),U=function(e){var t=!0;return Object.values(e).forEach((function(e){return e.length>0&&(t=!1)})),t},A=function(e){var t=0;return Object.values(e).forEach((function(e){return e.length>0&&(t+=1)})),t};var V=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).goToSignUp=function(e){e.preventDefault(),a.props.history.push("/sign-up")},a.handleChange=function(e){e.preventDefault();var t=e.target,s=t.name,n=t.value,o=a.state.errors;switch(s){case"email":o.email=_.test(n)?"":"Email is not valid!";break;case"password":o.password=n.length<8?"Password must be 8 characters long!":""}a.setState(Object(P.a)({errors:o},s,n))},a.handleSubmit=function(e){e.preventDefault(),a.setState({formValid:U(a.state.errors)}),a.setState({errorCount:A(a.state.errors)});var t,s={email:a.state.email,password:a.state.password};(t=s,f.a.post(E+"signin",{email:t.email,password:t.password}).then((function(e){return console.log(e),200===e.status&&"User logged in successfully"===e.data.message&&(localStorage.setItem("isLoggedIn",e.data.isLoggedIn),localStorage.setItem("fname",e.data.fname),localStorage.setItem("lname",e.data.lname),localStorage.setItem("email",e.data.email)),e})).catch((function(e){return console.log(e),{message:"error"}}))).then((function(e){if(console.log("print res"),console.log(e),200===e.status){var t=e.data.message;t.includes("Incorrect email address")?a.setState({errors:{email:t,password:""}}):t.includes("Incorrect password")?a.setState({errors:{email:"",password:t}}):t.includes("No user found")?alert("No user found. Try signing up."):(!function(e){if("undefined"!==typeof Storage)try{localStorage.setItem("twtr:auth",JSON.stringify(e))}catch(t){console.log(t)}}({access:e.data.access_token,refresh:e.data.refresh_token}),a.props.history.push("/home"))}else alert("Server Error!")}))},a.state={email:null,password:null,errors:{email:"",password:""}},a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){null!==localStorage.getItem("isLoggedIn")&&this.props.history.push("/home")}},{key:"render",value:function(){var e=this.state.errors;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I,{}),Object(w.jsx)("div",{class:"container",children:Object(w.jsx)("div",{class:"jumbotron",children:Object(w.jsxs)("form",{onSubmit:this.handleSubmit,noValidate:!0,children:[Object(w.jsx)("h3",{children:"Sign In"}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{children:"Email address"}),Object(w.jsx)("input",{type:"email",name:"email",className:"form-control",placeholder:"Enter email",onChange:this.handleChange,noValidate:!0,required:!0}),e.email.length>0&&Object(w.jsx)("span",{className:"error",children:e.email})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{children:"Password"}),Object(w.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Enter password",onChange:this.handleChange,noValidate:!0,required:!0}),e.password.length>0&&Object(w.jsx)("span",{className:"error",children:e.password})]}),Object(w.jsx)("div",{className:"info",children:Object(w.jsx)("small",{children:"Password must be eight characters in length."})}),Object(w.jsx)("button",{type:"submit",className:"btn btn-secondary btn-block",children:"Submit"})]})})})]})}}]),s}(a.Component),F=RegExp(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/),H=RegExp(/^\w+([.-]?\w+)+$/),K=function(e){var t=!0;return Object.values(e).forEach((function(e){return e.length>0&&(t=!1)})),t},R=function(e){var t=0;return Object.values(e).forEach((function(e){return e.length>0&&(t+=1)})),t},z=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).handleChange=function(e){e.preventDefault();var t=e.target,s=t.name,n=t.value,o=a.state.errors;switch(s){case"fname":o.fname=H.test(n)?"":"No special characters or numbers allowed";break;case"lname":o.lname=H.test(n)?"":"No special characters or numbers allowed";break;case"email":o.email=F.test(n)?"":"Email is not valid!";break;case"password":o.password=n.length<8?"Password must be 8 characters long!":"";break;case"repassword":o.repassword=n!==a.state.password?"Password does not match!":""}a.setState(Object(P.a)({errors:o},s,n))},a.handleSubmit=function(e){e.preventDefault(),a.setState({formValid:K(a.state.errors)}),a.setState({errorCount:R(a.state.errors)});var t,s={fname:a.state.fname,lname:a.state.lname,email:a.state.email,password:a.state.password};console.log("submit"),console.log(s),(t=s,f.a.post(E+"signup",{fname:t.fname,lname:t.lname,email:t.email,password:t.password}).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e),{message:"new error"}}))).then((function(e){console.log(e),200===e.status?e.data.message.includes("User added successfully")?a.props.history.push("/sign-in"):a.setState({errors:{fname:"",lname:"",email:e.data.message,password:""}}):alert("Server Error!")}))},a.state={formValid:!1,fname:null,lname:null,email:null,password:null,repassword:null,errors:{fname:"",lname:"",email:"",password:"",repassword:""}},a}return Object(d.a)(s,[{key:"render",value:function(){var e=this.state,t=e.errors;e.formValid;return Object(w.jsx)("div",{class:"container",children:Object(w.jsx)("div",{class:"jumbotron",children:Object(w.jsxs)("form",{onSubmit:this.handleSubmit,noValidate:!0,children:[Object(w.jsx)("h3",{children:"Sign Up"}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("input",{type:"text",className:"form-control",placeholder:"First name",name:"fname",onChange:this.handleChange,noValidate:!0,required:!0}),t.fname.length>0&&Object(w.jsx)("span",{className:"error",children:t.fname})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("input",{type:"text",className:"form-control",placeholder:"Last name",name:"lname",onChange:this.handleChange,noValidate:!0,required:!0}),t.lname.length>0&&Object(w.jsx)("span",{className:"error",children:t.lname})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",name:"email",onChange:this.handleChange,noValidate:!0,required:!0}),t.email.length>0&&Object(w.jsx)("span",{className:"error",children:t.email})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",name:"password",onChange:this.handleChange,noValidate:!0,required:!0}),t.password.length>0&&Object(w.jsx)("span",{className:"error",children:t.password})]}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("input",{type:"password",className:"form-control",placeholder:"Re-Enter password",name:"repassword",onChange:this.handleChange,noValidate:!0,required:!0}),t.repassword.length>0&&Object(w.jsx)("span",{className:"error",children:t.repassword})]}),Object(w.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"}),Object(w.jsxs)("p",{className:"forgot-password text-right",children:[Object(w.jsx)(c.b,{className:"nav-link",to:"/sign-in",children:"Already registered? Sign in"}),Object(w.jsx)(i.c,{children:Object(w.jsx)(i.a,{path:"/sign-in",component:V})})]})]})})})}}]),s}(a.Component),J=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"componentDidMount",value:function(){if("undefined"!==typeof Storage)try{localStorage.removeItem("twtr:auth")}catch(e){console.log(e)}localStorage.removeItem("isLoggedIn"),localStorage.removeItem("email"),localStorage.removeItem("fname"),this.props.history.push("/sign-in")}},{key:"render",value:function(){return Object(w.jsx)("div",{children:"Logged Out"})}}]),s}(a.Component),G=(s(129),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={bookings:[],message:"",success:"",present:!1},a.handleSearchKeyUp=a.keyUpHandler.bind(),a.deleteBooking=a.deleteBooking.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"deleteBooking",value:function(e){var t=this;console.log(e.target.value);var s=e.target.value;s=s.split(",");var a,n={email:localStorage.getItem("email"),operator:s[0],source:s[1],destination:s[2],date:s[3],bustime:s[4]};console.log(n),(a=n,f.a.post(x+"delete",{email:localStorage.getItem("email"),source:a.source,destination:a.destination,date:a.date,operator:a.operator,bustime:a.bustime},y).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))).then((function(e){if(200===e.status)if("No bookings found"===e.data.message)t.setState({message:e.data.message,present:!1});else{console.log(t.state.bookings),t.setState({success:e.data.message});k().then((function(e){200===e.status?null===e.data?(console.log("Test1"),t.setState({message:"",present:!1})):"No bookings found"===e.data.message?(console.log("Test1"),t.setState({message:e.data.message,present:!1})):t.setState({message:"Data Present",bookings:e.data,present:!0}):(console.log("Test2"),t.setState({message:"",present:!1}))}))}else t.setState({message:"",present:!1})}))}},{key:"keyUpHandler",value:function(){var e,t,s,a;for(e=document.getElementById("myInput").value.toUpperCase(),t=document.getElementById("listbookings").getElementsByTagName("a"),console.log(t),a=0;a<t.length;a++)(s=t[a].getElementsByTagName("div")[1])&&((s.textContent||s.innerText).toUpperCase().indexOf(e)>-1?t[a].style.display="":t[a].style.display="none")}},{key:"componentDidMount",value:function(){var e=this;null===localStorage.getItem("isLoggedIn")&&this.props.history.push("/");k().then((function(t){200===t.status?null===t.data?(console.log("Test1"),e.setState({message:"",present:!1})):"No bookings found"===t.data.message?(console.log("Test1"),e.setState({message:t.data.message,present:!1})):e.setState({message:"Data Present",bookings:t.data,present:!0}):(console.log("Test2"),e.setState({message:"",present:!1}))}))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I,{}),Object(w.jsxs)("div",{class:"container",children:[Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("input",{type:"text",id:"myInput",onKeyUp:this.handleSearchKeyUp,placeholder:"Search for names..",title:"Type in a operator name"}),""!==this.state.success&&Object(w.jsx)("span",{className:"success",children:this.state.success}),Object(w.jsx)("div",{class:"list-group ",id:"listbookings",children:Object.keys(this.state.bookings).map((function(t,s){return Object(w.jsxs)("a",{href:"#",class:"list-group-item list-group-item-action flex-column align-items-start mt-2 table-striped ",children:[Object(w.jsxs)("div",{class:"d-flex w-100 justify-content-between",children:[Object(w.jsx)("h5",{class:"mb-1",children:e.state.bookings[s].source+" to "+e.state.bookings[s].destination}),Object(w.jsx)("button",{type:"button",class:"btn btn-dark",value:e.state.bookings[s].operator+","+e.state.bookings[s].source+","+e.state.bookings[s].destination+","+e.state.bookings[s].date+","+e.state.bookings[s].bustime,onClick:e.deleteBooking,children:"Cancel Booking"})]}),Object(w.jsx)("div",{class:"mb-1  ",children:"Operator : "+e.state.bookings[s].operator}),Object(w.jsx)("div",{class:"mb-1 ",children:"Travel Date : "+e.state.bookings[s].date.substring(0,10)}),Object(w.jsx)("div",{class:"mb-1 ",children:"Bus Time : "+e.state.bookings[s].bustime})]})}))})]})]})}}]),s}(a.Component)),Y=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){return Object(l.a)(this,s),t.call(this,e)}return Object(d.a)(s,[{key:"render",value:function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I,{}),Object(w.jsx)("div",{class:"container",children:Object(w.jsx)("h3",{style:{color:"red"},children:"Page doesn't exist"})})]})}}]),s}(a.Component),$=s(555),W=(RegExp(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/),RegExp(/^\w+([.-]?\w+)+$/)),Z=(RegExp(),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).handleChange=function(e){var t;a.setState((t={},Object(P.a)(t,e.target.name,e.target.value),Object(P.a)(t,"successMessage",""),Object(P.a)(t,"busadded",!1),t))},a.handleChange1=function(e){e.preventDefault();var t=e.target,s=t.name,n=t.value,o=a.state.errors;switch(s){case"name":o.name=W.test(n)?"":"No special characters or numbers allowed";break;case"adSource":o.adSource=W.test(n)?"":"No special characters or numbers allowed";break;case"adDestination":o.adDestination=W.test(n)?"":"No special characters or numbers allowed"}a.setState(Object(P.a)({errors:o},s,n))},a.handleSubmit=function(e){e.preventDefault(),console.log("Add Bus clicked");var t,s={name:a.state.name,source:a.state.source,destination:a.state.destination,date:a.state.date,bustime:a.state.bustime,quantity:a.state.quantity,cost:a.state.cost};(t=s,f.a.post(E+"addbus",{busId:t.busId,name:t.name,source:t.source,destination:t.destination,date:t.date,time:t.bustime,quantity:t.quantity,cost:t.cost},q).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e),{message:"new error"}}))).then((function(e){console.log(e),200===e.status?e.data.message.includes("Bus added successfully")?(console.log("Bus added"),a.setState({name:"",source:"",destination:"",date:"",bustime:"",quantity:"",cost:"",busadded:!0,successMessage:"Bus added successfully!"})):(a.setState({errors:{busId:"",name:"",source:"",destination:"",date:"",bustime:"",quantity:""}}),setTimeout((function(){return a.setState({success:"Bus added successfully",successMessage:"Bus added successfully!"})}),500)):alert("Server Error!")}))},a.state={busId:"",name:"",date:"",time:"",source:"",destination:"",quantity:"",cost:"",success:"",busadded:!1,successMessage:"",placeholder:"Journey Date",errors:{busId:"",name:"",source:"",destination:"",quantity:"",submit:""}},a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.handleChangeId=a.handleChangeId.bind(Object(u.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(u.a)(a)),a.handleTimeChange=a.handleTimeChange.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){}},{key:"handleTimeChange",value:function(e){console.log(e),this.setState({time:e})}},{key:"handleDateChange",value:function(e){this.setState({date:new Date(e),startDate:e}),console.log("Check"),console.log(this.state.date)}},{key:"handleChangeId",value:function(e){this.setState({busId:e.target.value}),console.log(this.state.busId)}},{key:"render",value:function(){var e;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I,{}),Object(w.jsx)("div",{class:"container",children:Object(w.jsxs)("div",{class:"jumbotron",children:[this.state.busadded?Object(w.jsx)($.a,{className:"col-lg-12",variant:"success",children:this.state.successMessage}):"",Object(w.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(w.jsx)("h3",{children:"Admin Add Bus"}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"text",className:"form-control",id:"ad-operator",name:"name",value:this.state.name,onChange:this.handleChange,placeholder:"Bus Operator",required:!0})}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"text",className:"form-control",id:"ad-source",name:"source",value:this.state.source,onChange:this.handleChange,placeholder:"Pickup Location",required:!0})}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"text",className:"form-control",id:"ad-destination",name:"destination",value:this.state.destination,onChange:this.handleChange,placeholder:"Drop Location",required:!0})}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)(g.a,(e={className:"custom-select",value:this.state.date,selected:this.state.date,onChange:this.handleDateChange,placeholderText:this.state.placeholder},Object(P.a)(e,"selected",this.state.startDate),Object(P.a)(e,"minDate",p()().toDate()),Object(P.a)(e,"required",!0),e))}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"text",className:"form-control",id:"bus-time",name:"bustime",value:this.state.bustime,onChange:this.handleChange,placeholder:"Journey Time",required:!0})}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"number",className:"form-control",id:"ad-seats",min:"0",max:"80",name:"quantity",value:this.state.quantity,onChange:this.handleChange,placeholder:"Seats",required:!0})}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"text",className:"form-control",id:"cost",name:"cost",value:this.state.cost,onChange:this.handleChange,placeholder:"Ticket Price",required:!0})}),Object(w.jsx)("button",{type:"submit",className:"btn btn-secondary btn-block",value:"Submit",children:"Add Bus"}),""!==this.state.errors.submit&&Object(w.jsx)("span",{className:"error",children:this.state.errors.submit}),""!==this.state.success&&Object(w.jsx)("span",{className:"success",children:this.state.success})]})]})})]})}}]),s}(a.Component)),Q=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={buses:[],message:"",success:"",present:!1},a.handleSearchKeyUp=a.keyUpHandler.bind(),a.deleteBus=a.deleteBus.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"keyUpHandler",value:function(){var e,t,s,a;for(e=document.getElementById("myInput").value.toUpperCase(),t=document.getElementById("listbuses").getElementsByTagName("a"),console.log(t),a=0;a<t.length;a++)(s=t[a].getElementsByTagName("div")[1])&&((s.textContent||s.innerText).toUpperCase().indexOf(e)>-1?t[a].style.display="":t[a].style.display="none")}},{key:"componentDidMount",value:function(){var e=this;null===localStorage.getItem("isLoggedIn")&&this.props.history.push("/");S().then((function(t){200===t.status?null===t.data?(console.log("Test1"),e.setState({message:"",present:!1})):"No buses found"===t.data.message?(console.log("Test1"),e.setState({message:t.data.message,present:!1})):e.setState({message:"Data Present",buses:t.data,present:!0}):(console.log("Test2"),e.setState({message:"",present:!1}))}))}},{key:"deleteBus",value:function(e){var t=this;console.log(e.target.value);var s,a=e.target.value,n={name:(a=a.split(","))[0],source:a[1],destination:a[2],date:a[3],bustime:a[4],cost:a[5],quantity:a[6]};console.log(n),(s=n,f.a.post(x+"deletebus",{source:s.source,destination:s.destination,date:s.date,name:s.name,bustime:s.bustime,cost:s.cost,quantity:s.quantity}).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))).then((function(e){if(200===e.status)if("No buses found"===e.data.message)t.setState({message:e.data.message,present:!1});else{console.log(t.state.buses),t.setState({success:e.data.message});S().then((function(e){200===e.status?null===e.data?(console.log("Test1"),t.setState({message:"",present:!1})):"No buses found"===e.data.message?(console.log("Test1"),t.setState({message:e.data.message,present:!1})):t.setState({message:"Data Present",buses:e.data,present:!0}):(console.log("Test2"),t.setState({message:"",present:!1}))}))}else t.setState({message:"",present:!1})}))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I,{}),Object(w.jsxs)("div",{class:"container",children:[Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("input",{type:"text",id:"myInput",onKeyUp:this.handleSearchKeyUp,placeholder:"Search for names..",title:"Type in a operator name"}),""!==this.state.success&&Object(w.jsx)("span",{className:"success",children:this.state.success}),Object(w.jsx)("div",{class:"list-group ",id:"listbuses",children:Object.keys(this.state.buses).map((function(t,s){return Object(w.jsxs)("a",{href:"#",class:"list-group-item list-group-item-action flex-column align-items-start mt-2 table-striped ",children:[Object(w.jsxs)("div",{class:"d-flex w-100 justify-content-between",children:[Object(w.jsx)("h5",{class:"mb-1",children:e.state.buses[s].source+" to "+e.state.buses[s].destination}),Object(w.jsx)("button",{type:"button",class:"btn btn-dark",value:e.state.buses[s].name+","+e.state.buses[s].source+","+e.state.buses[s].destination+","+e.state.buses[s].date+","+e.state.buses[s].bustime+","+e.state.buses[s].cost+","+e.state.buses[s].quantity,onClick:e.deleteBus,children:"Delete"})]}),Object(w.jsx)("div",{class:"mb-1  ",children:"Operator : "+e.state.buses[s].name}),Object(w.jsx)("div",{class:"mb-1 ",children:"Travel Date : "+e.state.buses[s].date.substring(0,10)}),Object(w.jsx)("div",{class:"mb-1 ",children:"Bus Time : "+e.state.buses[s].bustime})]})}))})]})]})}}]),s}(a.Component),X=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={bookings:[],message:"",success:"",present:!1},a.handleSearchKeyUp=a.keyUpHandler.bind(),a.adminDeleteBooking=a.adminDeleteBooking.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"adminDeleteBooking",value:function(e){var t=this;console.log(e.target.value),console.log("Inside admin delete");var s,a=e.target.value,n={operator:(a=a.split(","))[0],source:a[1],destination:a[2],date:a[3],bustime:a[4],email:a[5]};console.log(n),(s=n,f.a.post(x+"admindelete",{email:s.email,source:s.source,destination:s.destination,date:s.date,operator:s.operator,bustime:s.bustime},y).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))).then((function(e){if(200===e.status)if("No bookings found"===e.data.message)t.setState({message:e.data.message,present:!1});else{console.log(t.state.bookings),t.setState({success:e.data.message});N().then((function(e){200===e.status?null===e.data?(console.log("Test1"),t.setState({message:"",present:!1})):"No bookings found"===e.data.message?(console.log("Test1"),t.setState({message:e.data.message,present:!1})):t.setState({message:"Data Present",bookings:e.data,present:!0}):(console.log("Test2"),t.setState({message:"",present:!1}))}))}else t.setState({message:"",present:!1})}))}},{key:"keyUpHandler",value:function(){var e,t,s,a;for(e=document.getElementById("myInput").value.toUpperCase(),t=document.getElementById("listbookings").getElementsByTagName("a"),console.log(t),a=0;a<t.length;a++)(s=t[a].getElementsByTagName("div")[1])&&((s.textContent||s.innerText).toUpperCase().indexOf(e)>-1?t[a].style.display="":t[a].style.display="none")}},{key:"componentDidMount",value:function(){var e=this;null===localStorage.getItem("isLoggedIn")&&this.props.history.push("/");N().then((function(t){200===t.status?null===t.data?(console.log("Test1"),e.setState({message:"",present:!1})):"No bookings found"===t.data.message?(console.log("Test1"),e.setState({message:t.data.message,present:!1})):e.setState({message:"Data Present",bookings:t.data,present:!0}):(console.log("Test2"),e.setState({message:"",present:!1}))}))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(I,{}),Object(w.jsxs)("div",{class:"container",children:[Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("input",{type:"text",id:"myInput",onKeyUp:this.handleSearchKeyUp,placeholder:"Search for names..",title:"Type in a operator name"}),""!==this.state.success&&Object(w.jsx)("span",{className:"success",children:this.state.success}),Object(w.jsx)("div",{class:"list-group ",id:"listbookings",children:Object.keys(this.state.bookings).map((function(t,s){return Object(w.jsxs)("a",{href:"#",class:"list-group-item list-group-item-action flex-column align-items-start mt-2 table-striped ",children:[Object(w.jsxs)("div",{class:"d-flex w-100 justify-content-between",children:[Object(w.jsx)("h5",{class:"mb-1",children:e.state.bookings[s].source+" to "+e.state.bookings[s].destination}),Object(w.jsx)("button",{type:"button",class:"btn btn-dark",value:e.state.bookings[s].operator+","+e.state.bookings[s].source+","+e.state.bookings[s].destination+","+e.state.bookings[s].date+","+e.state.bookings[s].bustime+","+e.state.bookings[s].email,onClick:e.adminDeleteBooking,children:"Delete"})]}),Object(w.jsx)("div",{class:"mb-1  ",children:"Operator : "+e.state.bookings[s].operator}),Object(w.jsx)("div",{class:"mb-1  ",children:"Email : "+e.state.bookings[s].email}),Object(w.jsx)("div",{class:"mb-1 ",children:"Travel Date : "+e.state.bookings[s].date.substring(0,10)}),Object(w.jsx)("div",{class:"mb-1 ",children:"Bus Time : "+e.state.bookings[s].bustime})]})}))})]})]})}}]),s}(a.Component),ee=s(91),te=s.n(ee),se=s(232),ae=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={error:null,response:""},a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=Object(se.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://ad5f8402a31d1430ba79fe66b89f65be-1681252358.us-west-2.elb.amazonaws.com:5000/app/testHealth",{mode:"cors"}).then((function(e){return e.text()})).then((function(e){console.log("Request successful",e),alert(e)})).catch((function(e){console.log("Request failed",e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null!=this.state.error?Object(w.jsx)("h4",{children:this.state.error}):Object(w.jsx)("div",{children:this.state.response})}}]),s}(n.a.Component);var ne=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(c.a,{children:[Object(w.jsx)(I,{}),Object(w.jsxs)(i.c,{children:[Object(w.jsx)(i.a,{exact:!0,path:"/",component:V}),Object(w.jsx)(i.a,{exact:!0,path:"/view-bookings",component:G}),Object(w.jsx)(i.a,{exact:!0,path:"/home",component:L}),Object(w.jsx)(i.a,{exact:!0,path:"/sign-in",component:V}),Object(w.jsx)(i.a,{exact:!0,path:"/sign-up",component:z}),Object(w.jsx)(i.a,{path:"/admin",component:C}),Object(w.jsx)(i.a,{path:"/addBus",component:Z}),Object(w.jsx)(i.a,{path:"/viewBuses",component:Q}),Object(w.jsx)(i.a,{exact:!0,path:"/all-bookings",component:X}),Object(w.jsx)(i.a,{exact:!0,path:"/testHealth",children:Object(w.jsx)("div",{style:{marginTop:100,color:"white",fontWeight:700},children:"Hello from Uber Bus React App. I am healthy!"})}),Object(w.jsx)(i.a,{exact:!0,path:"/testComms",component:ae}),Object(w.jsx)(i.a,{exact:!0,path:"/logout",component:J}),Object(w.jsx)(i.a,{path:"/",component:Y})]})]})})},oe=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,556)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),o(e),r(e)}))};r.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(ne,{})}),document.getElementById("root")),oe()},65:function(e,t,s){}},[[550,1,2]]]);
//# sourceMappingURL=main.447fcc75.chunk.js.map