(this["webpackJsonpuber-bus-app"]=this["webpackJsonpuber-bus-app"]||[]).push([[0],{227:function(e,t,a){},542:function(e,t,a){},543:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),o=a(21),r=a.n(o),i=(a(227),a(228),a(90),a(29)),l=a(8),c=a(9),d=a(10),u=a(22),h=a(13),m=a(12),b=a(219),g=a.n(b),p=(a(229),a(235),a(236),a(214)),j=a.n(p),O=a(37),v=a.n(O),f="/app/",x=function(e){return v.a.post(f+"getbookings",{email:localStorage.getItem("email")}).then((function(e){return console.log("Try"),console.log(e),e})).catch((function(e){console.log("Catch"),console.log(e)}))},k=function(e){return v.a.post(f+"delete",{email:localStorage.getItem("email"),source:e.source,destination:e.destination,date:e.date,operator:e.operator,bustime:e.bustime}).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))},S=a(0),y=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={show:!1},s.toggleMenu=s.toggleMenu.bind(Object(u.a)(s)),console.log(s.state.show),s}return Object(d.a)(a,[{key:"toggleMenu",value:function(){this.setState({show:!this.state.show})}},{key:"render",value:function(){var e=Object(S.jsx)("nav",{class:"navbar navbar-expand-md navbar-dark bg-dark mb-3 fixed-top",children:Object(S.jsxs)("div",{className:"container-fluid",children:[Object(S.jsxs)(i.b,{className:"navbar-brand mr-3",to:"/home",children:[Object(S.jsx)("img",{src:"static/bus.png",alt:"",width:"50px",height:"50px"})," "]}),Object(S.jsxs)("h3",{className:"navbar-brand mr-3",children:[" ","Hi ",localStorage.fname]}),Object(S.jsx)("button",{type:"button",class:"navbar-toggler",onClick:this.toggleMenu,children:Object(S.jsx)("span",{className:"navbar-toggler-icon"})}),Object(S.jsx)("div",{style:this.state.show?{display:"block"}:{display:"none"},className:"collapse navbar-collapse",children:Object(S.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(S.jsx)(i.b,{className:"nav-item nav-link",to:"/view-bookings",children:"View Bookings"}),Object(S.jsx)(i.b,{className:"nav-item nav-link",to:"/home",children:"Home"}),Object(S.jsx)(i.b,{className:"nav-item nav-link",to:"/logout",children:"Logout"})]})})]})}),t=Object(S.jsx)("nav",{class:"navbar navbar-expand-md navbar-dark bg-dark mb-3 fixed-top",children:Object(S.jsxs)("div",{className:"container-fluid",children:[Object(S.jsxs)(i.b,{className:"navbar-brand mr-3",to:"/home",children:[Object(S.jsx)("img",{src:"static/bus.png",alt:"",width:"50px",height:"50px"})," "]}),Object(S.jsx)("button",{type:"button",className:"navbar-toggler",onClick:this.toggleMenu,children:Object(S.jsx)("span",{className:"navbar-toggler-icon"})}),Object(S.jsx)("div",{style:this.state.show?{display:"block"}:{display:"none"},className:"collapse navbar-collapse",children:Object(S.jsxs)("div",{className:"navbar-nav ml-auto ",children:[Object(S.jsx)(i.b,{className:"nav-item nav-link",to:"/sign-in",children:"Login"}),Object(S.jsx)(i.b,{className:"nav-item nav-link",to:"/sign-up",children:"Sign up"})]})})]})});return Object(S.jsx)(S.Fragment,{children:localStorage.isLoggedIn?e:t})}}]),a}(s.Component),w=a(222),N=a(86),C=a.n(N),I=(a(262),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("span",{className:"pin-text",children:this.props.text}),Object(S.jsx)("div",{className:"pin"})]})}}]),a}(s.Component)),D=(a(263),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={source:"Select Source",destination:"Select Destination",operator:"",operatorsList:[],date:"",time:0,enable:!0,success:"",noTiketsMessage:"The Bus is full",marker_path:[],source_lat:0,source_lng:0,dest_lat:0,dest_lng:0,google:0,flightPath:0,errors:{source:"",destination:"",operator:"",date:"",submit:""}},C.a.setApiKey("AIzaSyArSiBGE5n217Fcd9N59Y6yIynN6gyVSzM"),s.handleDateChange=s.handleDateChange.bind(Object(u.a)(s)),s.getOperator=s.getOperator.bind(Object(u.a)(s)),s.handleSourceChange=s.handleSourceChange.bind(Object(u.a)(s)),s.handleDestinationChange=s.handleDestinationChange.bind(Object(u.a)(s)),s.handleOperatorChange=s.handleOperatorChange.bind(Object(u.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(u.a)(s)),s.handleTimeChange=s.handleTimeChange.bind(Object(u.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){null===localStorage.getItem("isLoggedIn")&&this.props.history.push("/")}},{key:"handleTimeChange",value:function(e){console.log(e),this.setState({time:e})}},{key:"handleSourceChange",value:function(e){this.setState({source:e.target.value,date:"",operator:"",errors:{source:"",destination:"",submit:""}})}},{key:"handleSourceMarker",value:function(e){console.log("inside");var t=new this.state.google.maps.Polyline({path:[],strokeWeight:0});t.setMap(null),this.state.flightPath&&this.setState({flightPath:t}),e&&this.sourceHandler(e)}},{key:"handleDateChange",value:function(e){"Select Source"===this.state.source?this.setState({errors:{source:"Source cannot be empty",destination:""}}):"Select Destination"===this.state.destination?this.setState({errors:{source:"",destination:"Destionation cannot be empty"}}):(console.log("Value"),console.log(e),this.setState({date:new Date(e),operatorsList:[],operator:"",errors:{source:"",destination:""}}),console.log("Check"),console.log(this.state.date))}},{key:"getOperator",value:function(e){var t=this;e.preventDefault(),console.log("Get Operator"),console.log(this.state.date),function(e){return v.a.post(f+"getoperator",{source:e.source,destination:e.destination,date:e.date}).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e),e}))}({source:this.state.source,destination:this.state.destination,date:this.state.date}).then((function(e){if(200===e.status)if("No operators has seats available"===e.data.message||"No operators found"===e.data.message)console.log("Operator data1"),console.log(e.data),t.setState({operatorsList:[],enable:!0,errors:{source:"",destination:"",operator:"No operators has seats available. Select another date.",submit:""}});else{console.log("Operator data2"),console.log(e.data);var a=Object.keys(e.data).length;console.log(a),a<1?t.setState({operatorsList:[],enable:!0,errors:{operator:"No operator found",submit:""}}):(t.setState({enable:!1}),t.setState({operatorsList:e.data,operator:e.data[0].name+"/"+e.data[0].bustime,errors:{source:"",destination:"",operator:""}}))}}))}},{key:"handleDestinationChange",value:function(e){"Select Source"===this.state.source?this.setState({errors:{source:"Source cannot be empty",destination:""}}):this.state.source===e.target.value?this.setState({errors:{source:"",destination:"Destination cannot be same as source"}}):this.setState({destination:e.target.value,date:"",operator:"",errors:{source:"",destination:""}}),this.handleDestinationMarker(e.target.value)}},{key:"handleOperatorChange",value:function(e){console.log(e.target.key),this.setState({operator:e.target.value}),console.log("Operator Change:",this.state.operator)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(""),console.log(this.state.date),console.log(this.state.operator);var a="Select Source",s="Select Destination",n="",o="";if(this.state.source===a||this.state.destination===s||this.state.date===n||this.state.operator===o)this.setState({errors:{submit:"Select all the required fields"}});else{var r={email:localStorage.getItem("email"),source:this.state.source,destination:this.state.destination,date:this.state.date,operator:this.state.operator};console.log(r),function(e){return v.a.post(f+"addbooking",{email:e.email,source:e.source,destination:e.destination,date:e.date,operator:e.operator}).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))}(r).then((function(e){if(200===e.status)if("Operator not available"===e.data.message)t.setState({error:{source:"",destination:"",operator:e.data.message,operatorsList:[],submit:e.data.message}});else{var a=Object.keys(e.data).length;console.log(a),a<1&&t.setState({error:{source:"",destination:"",operator:"",operatorsList:[],submit:"No buses found"}}),t.setState({source:"Select Source",destination:"Select Destination",operator:"",operatorsList:[],date:"",enable:!0}),setTimeout((function(){return t.setState({success:"Booking done successfully"})}),1e3)}}))}}},{key:"sourceHandler",value:function(e){var t=this;C.a.fromAddress(e).then((function(e){var a=t.state.marker_path[0]=e.results[0].geometry.location,s=a.lat,n=a.lng;if(t.setState({source_lat:s,source_lng:n,marker_path:t.state.marker_path}),t.state.marker_path.length>1){var o=new t.state.google.maps.Polyline({path:t.state.marker_path,geodesic:!0,strokeColor:"red",strokeOpacity:1,strokeWeight:3});o.setMap(t.state.google.map),t.setState({flightPath:o})}}),(function(e){console.error(e)}))}},{key:"destinationHandler",value:function(e){var t=this;C.a.fromAddress(e).then((function(e){var a=t.state.marker_path[1]=e.results[0].geometry.location,s=a.lat,n=a.lng;if(t.setState({dest_lat:s,dest_lng:n,marker_path:t.state.marker_path}),t.state.marker_path.length>1){var o=new t.state.google.maps.Polyline({path:t.state.marker_path,geodesic:!0,strokeColor:"red",strokeOpacity:1,strokeWeight:2});o.setMap(t.state.google.map),t.setState({flightPath:o})}}),(function(e){console.error(e)}))}},{key:"handleDestinationMarker",value:function(e){this.state.flightPath&&(this.state.flightPath.setMap(null),this.state.flightPath.setPath([]),this.state.flightPath=null),e&&this.destinationHandler(e)}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y,{}),Object(S.jsx)("div",{class:"container",children:Object(S.jsxs)("div",{class:"row",children:[Object(S.jsx)("div",{class:"col-md-6",children:Object(S.jsx)("div",{class:"jumbotron",children:Object(S.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(S.jsx)("h3",{children:"Bus Ticket Booking"}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsxs)("select",{className:"custom-select",value:this.state.source,onChange:function(t){e.handleSourceChange(t),e.handleSourceMarker(t.target.value)},required:!0,children:[Object(S.jsx)("option",{value:"destination",children:"Select Source"}),Object(S.jsx)("option",{value:"Boston",children:"Boston"}),Object(S.jsx)("option",{value:"New York",children:"New York"}),Object(S.jsx)("option",{value:"Pittsburgh",children:"Pittsburgh"}),Object(S.jsx)("option",{value:"Cambridge",children:"Cambridge"}),Object(S.jsx)("option",{value:"Brookline",children:"Brookline"})]}),""!==this.state.errors.source&&Object(S.jsx)("span",{className:"error",children:this.state.errors.source})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsxs)("select",{className:"custom-select",value:this.state.destination,onChange:function(t){e.handleDestinationChange(t),e.handleDestinationMarker(t.target.value)},required:!0,children:[Object(S.jsx)("option",{value:"destination",children:"Select Destination"}),Object(S.jsx)("option",{value:"Boston",children:"Boston"}),Object(S.jsx)("option",{value:"New York",children:"New York"}),Object(S.jsx)("option",{value:"Pittsburgh",children:"Pittsburgh"}),Object(S.jsx)("option",{value:"Cambridge",children:"Cambridge"}),Object(S.jsx)("option",{value:"Brookline",children:"Brookline"})]}),""!==this.state.errors.destination&&Object(S.jsx)("span",{className:"error",children:this.state.errors.destination})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)(g.a,{className:"custom-select",value:this.state.date,selected:this.state.date,onChange:this.handleDateChange,minDate:j()().toDate(),required:!0}),""!==this.state.errors.date&&Object(S.jsx)("span",{className:"error",children:this.state.errors.date}),Object(S.jsx)("button",{onClick:this.getOperator,className:"btn btn-secondary btn-block",children:"Get Operators"}),Object(S.jsx)("select",{id:"operator",className:"custom-select",value:this.state.operator,onChange:this.handleOperatorChange,disabled:this.state.enable,required:!0,children:Object.keys(this.state.operatorsList).map((function(t,a){return e.state.operatorsList[a].quantity>=1?Object(S.jsx)("option",{value:e.state.operatorsList[a].name+"/"+e.state.operatorsList[a].bustime,children:e.state.operatorsList[a].name+" "+e.state.operatorsList[a].bustime},a):null}))}),""!==this.state.errors.operator&&Object(S.jsx)("span",{className:"error",children:this.state.errors.operator})]}),Object(S.jsx)("button",{type:"submit",className:"btn btn-secondary btn-block",value:"Submit",children:"Book"}),""!==this.state.errors.submit&&Object(S.jsx)("span",{className:"error",children:this.state.errors.submit}),""!==this.state.success&&Object(S.jsx)("span",{className:"success",children:this.state.success})]})})}),Object(S.jsx)("div",{class:"col-md-6",children:Object(S.jsxs)(w.a,{bootstrapURLKeys:{key:"AIzaSyArSiBGE5n217Fcd9N59Y6yIynN6gyVSzM"},defaultCenter:{lat:42.361145,lng:-71.057083},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){return e.setState({google:t})},defaultZoom:10,children:[this.state.source&&this.state.source_lat&&this.state.source_lng&&Object(S.jsx)(I,{lat:this.state.source_lat,lng:this.state.source_lng,text:"S"}),this.state.destination&&this.state.dest_lat&&this.state.dest_lng&&Object(S.jsx)(I,{lat:this.state.dest_lat,lng:this.state.dest_lng,text:"D"})]})})]})})]})}}]),a}(s.Component)),L=a(85),P=RegExp(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/),B=function(e){var t=!0;return Object.values(e).forEach((function(e){return e.length>0&&(t=!1)})),t},_=function(e){var t=0;return Object.values(e).forEach((function(e){return e.length>0&&(t+=1)})),t},E=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).goToSignUp=function(e){e.preventDefault(),s.props.history.push("/sign-up")},s.handleChange=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value,o=s.state.errors;switch(a){case"email":o.email=P.test(n)?"":"Email is not valid!";break;case"password":o.password=n.length<8?"Password must be 8 characters long!":""}s.setState(Object(L.a)({errors:o},a,n))},s.handleSubmit=function(e){e.preventDefault(),s.setState({formValid:B(s.state.errors)}),s.setState({errorCount:_(s.state.errors)});var t,a={email:s.state.email,password:s.state.password};(t=a,v.a.post("/app/signin",{email:t.email,password:t.password}).then((function(e){return console.log(e),200===e.status&&"User logged in successfully"===e.data.message&&(localStorage.setItem("isLoggedIn",e.data.isLoggedIn),localStorage.setItem("fname",e.data.fname),localStorage.setItem("lname",e.data.lname),localStorage.setItem("email",e.data.email)),e})).catch((function(e){return console.log(e),{message:"error"}}))).then((function(e){if(200===e.status){var t=e.data.message;t.includes("Incorrect email address")?s.setState({errors:{email:t,password:""}}):t.includes("Incorrect password")?s.setState({errors:{email:"",password:t}}):t.includes("No user found")?alert("No user found. Try signing up."):(localStorage.setItem("isLoggedIn",e.data.isLoggedIn),localStorage.setItem("fname",e.data.fname),localStorage.setItem("lname",e.data.lname),localStorage.setItem("email",e.data.email),console.log(localStorage.getItem("email")),s.props.history.push("/home"))}else alert("Server Error!")}))},s.state={email:null,password:null,errors:{email:"",password:""}},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){null!==localStorage.getItem("isLoggedIn")&&this.props.history.push("/home")}},{key:"render",value:function(){var e=this.state.errors;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y,{}),Object(S.jsx)("div",{class:"container",children:Object(S.jsx)("div",{class:"jumbotron",children:Object(S.jsxs)("form",{onSubmit:this.handleSubmit,noValidate:!0,children:[Object(S.jsx)("h3",{children:"Sign In"}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Email address"}),Object(S.jsx)("input",{type:"email",name:"email",className:"form-control",placeholder:"Enter email",onChange:this.handleChange,noValidate:!0,required:!0}),e.email.length>0&&Object(S.jsx)("span",{className:"error",children:e.email})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Password"}),Object(S.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Enter password",onChange:this.handleChange,noValidate:!0,required:!0}),e.password.length>0&&Object(S.jsx)("span",{className:"error",children:e.password})]}),Object(S.jsx)("div",{className:"info",children:Object(S.jsx)("small",{children:"Password must be eight characters in length."})}),Object(S.jsx)("button",{type:"submit",className:"btn btn-secondary btn-block",children:"Submit"})]})})})]})}}]),a}(s.Component),T=RegExp(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/),M=RegExp(/^\w+([.-]?\w+)+$/),V=function(e){var t=!0;return Object.values(e).forEach((function(e){return e.length>0&&(t=!1)})),t},F=function(e){var t=0;return Object.values(e).forEach((function(e){return e.length>0&&(t+=1)})),t},U=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).handleChange=function(e){e.preventDefault();var t=e.target,a=t.name,n=t.value,o=s.state.errors;switch(a){case"fname":o.fname=M.test(n)?"":"No special characters or numbers allowed";break;case"lname":o.lname=M.test(n)?"":"No special characters or numbers allowed";break;case"email":o.email=T.test(n)?"":"Email is not valid!";break;case"password":o.password=n.length<8?"Password must be 8 characters long!":"";break;case"repassword":o.repassword=n!==s.state.password?"Password does not match!":""}s.setState(Object(L.a)({errors:o},a,n))},s.handleSubmit=function(e){e.preventDefault(),s.setState({formValid:V(s.state.errors)}),s.setState({errorCount:F(s.state.errors)});var t,a={fname:s.state.fname,lname:s.state.lname,email:s.state.email,password:s.state.password};console.log("submit"),console.log(a),(t=a,v.a.post("/app/signup",{fname:t.fname,lname:t.lname,email:t.email,password:t.password}).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e),{message:"new error"}}))).then((function(e){console.log(e),200===e.status?e.data.message.includes("User added successfully")?s.props.history.push("/sign-in"):s.setState({errors:{fname:"",lname:"",email:e.data.message,password:""}}):alert("Server Error!")}))},s.state={formValid:!1,fname:null,lname:null,email:null,password:null,repassword:null,errors:{fname:"",lname:"",email:"",password:"",repassword:""}},s}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.errors,a=e.formValid;return Object(S.jsx)("div",{class:"container",children:Object(S.jsx)("div",{class:"jumbotron",children:Object(S.jsxs)("form",{onSubmit:this.handleSubmit,noValidate:!0,children:[Object(S.jsx)("h3",{children:"Sign Up"}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"First name"}),Object(S.jsx)("input",{type:"text",className:"form-control",placeholder:"First name",name:"fname",onChange:this.handleChange,noValidate:!0,required:!0}),t.fname.length>0&&Object(S.jsx)("span",{className:"error",children:t.fname})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Last name"}),Object(S.jsx)("input",{type:"text",className:"form-control",placeholder:"Last name",name:"lname",onChange:this.handleChange,noValidate:!0,required:!0}),t.lname.length>0&&Object(S.jsx)("span",{className:"error",children:t.lname})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Email address"}),Object(S.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",name:"email",onChange:this.handleChange,noValidate:!0,required:!0}),t.email.length>0&&Object(S.jsx)("span",{className:"error",children:t.email})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Password"}),Object(S.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",name:"password",onChange:this.handleChange,noValidate:!0,required:!0}),t.password.length>0&&Object(S.jsx)("span",{className:"error",children:t.password})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{children:"Re-Enter Password"}),Object(S.jsx)("input",{type:"password",className:"form-control",placeholder:"Re-Enter password",name:"repassword",onChange:this.handleChange,noValidate:!0,required:!0}),t.repassword.length>0&&Object(S.jsx)("span",{className:"error",children:t.repassword})]}),Object(S.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"}),null!==this.state.errorCount?Object(S.jsxs)("p",{className:"form-status",children:["Form is ",a?"valid \u2705":"invalid \u274c"]}):"Form not submitted",Object(S.jsxs)("p",{className:"forgot-password text-right",children:[Object(S.jsx)(i.b,{className:"nav-link",to:"/sign-in",children:"Already registered? Sign in"}),Object(S.jsx)(l.c,{children:Object(S.jsx)(l.a,{path:"/sign-in",component:E})})]})]})})})}}]),a}(s.Component),q=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log(localStorage.getItem("isLoggedIn")),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("email"),localStorage.removeItem("fname"),localStorage.removeItem("lname"),this.props.history.push("/sign-in")}},{key:"render",value:function(){return Object(S.jsx)("div",{children:"Logged Out"})}}]),a}(s.Component),A=(s.Component,a(542),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={bookings:[],message:"",success:"",present:!1},s.handleSearchKeyUp=s.keyUpHandler.bind(),s.deleteBooking=s.deleteBooking.bind(Object(u.a)(s)),s}return Object(d.a)(a,[{key:"deleteBooking",value:function(e){var t=this;console.log(e.target.value);var a=e.target.value;a=a.split(",");var s={email:localStorage.getItem("email"),operator:a[0],source:a[1],destination:a[2],date:a[3],bustime:a[4]};console.log(s),k(s).then((function(e){if(200===e.status)if("No bookings found"===e.data.message)t.setState({message:e.data.message,present:!1});else{console.log(t.state.bookings),t.setState({success:e.data.message});x().then((function(e){200===e.status?null===e.data?(console.log("Test1"),t.setState({message:"",present:!1})):"No bookings found"===e.data.message?(console.log("Test1"),t.setState({message:e.data.message,present:!1})):t.setState({message:"Data Present",bookings:e.data,present:!0}):(console.log("Test2"),t.setState({message:"",present:!1}))}))}else t.setState({message:"",present:!1})}))}},{key:"keyUpHandler",value:function(){var e,t,a,s;for(e=document.getElementById("myInput").value.toUpperCase(),t=document.getElementById("listbookings").getElementsByTagName("a"),console.log(t),s=0;s<t.length;s++)(a=t[s].getElementsByTagName("div")[1])&&((a.textContent||a.innerText).toUpperCase().indexOf(e)>-1?t[s].style.display="":t[s].style.display="none")}},{key:"componentDidMount",value:function(){var e=this;null===localStorage.getItem("isLoggedIn")&&this.props.history.push("/");x().then((function(t){200===t.status?null===t.data?(console.log("Test1"),e.setState({message:"",present:!1})):"No bookings found"===t.data.message?(console.log("Test1"),e.setState({message:t.data.message,present:!1})):e.setState({message:"Data Present",bookings:t.data,present:!0}):(console.log("Test2"),e.setState({message:"",present:!1}))}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y,{}),Object(S.jsxs)("div",{class:"container",children:[Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("input",{type:"text",id:"myInput",onKeyUp:this.handleSearchKeyUp,placeholder:"Search for names..",title:"Type in a operator name"}),""!==this.state.success&&Object(S.jsx)("span",{className:"success",children:this.state.success}),Object(S.jsx)("div",{class:"list-group ",id:"listbookings",children:Object.keys(this.state.bookings).map((function(t,a){return Object(S.jsxs)("a",{href:"#",class:"list-group-item list-group-item-action flex-column align-items-start mt-2 table-striped ",children:[Object(S.jsxs)("div",{class:"d-flex w-100 justify-content-between",children:[Object(S.jsx)("h5",{class:"mb-1",children:e.state.bookings[a].source+" to "+e.state.bookings[a].destination}),Object(S.jsx)("button",{type:"button",class:"btn btn-dark",value:e.state.bookings[a].operator+","+e.state.bookings[a].source+","+e.state.bookings[a].destination+","+e.state.bookings[a].date+","+e.state.bookings[a].bustime,onClick:e.deleteBooking,children:"Delete"})]}),Object(S.jsx)("div",{class:"mb-1  ",children:"Operator : "+e.state.bookings[a].operator}),Object(S.jsx)("div",{class:"mb-1 ",children:"Travel Date : "+e.state.bookings[a].date.substring(0,10)}),Object(S.jsx)("div",{class:"mb-1 ",children:"Bus Time : "+e.state.bookings[a].bustime})]})}))})]})]})}}]),a}(s.Component)),H=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(d.a)(a,[{key:"render",value:function(){return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y,{}),Object(S.jsx)("div",{class:"container",children:Object(S.jsx)("h3",{style:{color:"red"},children:"Page doesn't exist"})})]})}}]),a}(s.Component);var G=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsxs)(i.a,{children:[Object(S.jsx)(y,{}),Object(S.jsxs)(l.c,{children:[Object(S.jsx)(l.a,{exact:!0,path:"/",component:E}),Object(S.jsx)(l.a,{exact:!0,path:"/view-bookings",component:A}),Object(S.jsx)(l.a,{exact:!0,path:"/home",component:D}),Object(S.jsx)(l.a,{exact:!0,path:"/sign-in",component:E}),Object(S.jsx)(l.a,{exact:!0,path:"/sign-up",component:U}),Object(S.jsx)(l.a,{exact:!0,path:"/logout",component:q}),Object(S.jsx)(l.a,{path:"/",component:H})]})]})})},R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,546)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),o(e),r(e)}))};r.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(G,{})}),document.getElementById("root")),R()},90:function(e,t,a){}},[[543,1,2]]]);
//# sourceMappingURL=main.1b660508.chunk.js.map