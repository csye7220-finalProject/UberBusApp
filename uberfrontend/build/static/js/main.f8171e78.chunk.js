(this["webpackJsonpuber-bus-app"]=this["webpackJsonpuber-bus-app"]||[]).push([[0],{125:function(e,t,s){},231:function(e,t,s){},543:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),o=s(23),r=s.n(o),i=(s(231),s(232),s(62),s(9)),c=s(14),l=s(7),d=s(8),u=s(10),h=s(12),b=s(11),m=s(88),g=s.n(m),j=(s(131),s(132),s(133),s(87)),p=s.n(j),O=s(25),f=s.n(O),v="/app/";var x={headers:{Authorization:"Bearer "+function(){if("undefined"!==typeof Storage)try{return JSON.parse(localStorage.getItem("twtr:auth")).access}catch(e){console.log(e)}}()}},y=function(e){return f.a.post(v+"getbookings",{email:localStorage.getItem("email")},x).then((function(e){return console.log("Try"),console.log(e),e})).catch((function(e){console.log("Catch"),console.log(e)}))},k=function(e){return f.a.post(v+"getbuses",{}).then((function(e){return console.log("Try"),console.log(e),e})).catch((function(e){console.log("Catch"),console.log(e)}))},S=function(e){return f.a.post(v+"allbookings",{}).then((function(e){return console.log("Try"),console.log(e),e})).catch((function(e){console.log("Catch"),console.log(e)}))},N=s(0),w=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={show:!1},a.toggleMenu=a.toggleMenu.bind(Object(u.a)(a)),console.log(a.state.show),a}return Object(d.a)(s,[{key:"toggleMenu",value:function(){this.setState({show:!this.state.show})}},{key:"render",value:function(){i.b,localStorage.fname,this.toggleMenu,this.state.show,i.b,i.b,i.b,i.b,i.b,this.toggleMenu,this.state.show,i.b,i.b;return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("nav",{class:"navbar navbar-expand-md navbar-dark bg-dark mb-3 fixed-top",children:Object(N.jsxs)("div",{className:"container-fluid",children:[Object(N.jsxs)(i.b,{className:"navbar-brand mr-3",to:"/admin",children:[Object(N.jsx)("img",{src:"static/bus.png",alt:"",width:"50px",height:"50px"})," "]}),Object(N.jsxs)("h3",{className:"navbar-brand mr-3",children:[" Hi ",localStorage.fname]}),Object(N.jsx)("button",{type:"button",class:"navbar-toggler",onClick:this.toggleMenu,children:Object(N.jsx)("span",{className:"navbar-toggler-icon"})}),Object(N.jsx)("div",{style:this.state.show?{display:"block"}:{display:"none"},className:"collapse navbar-collapse",children:Object(N.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(N.jsx)(i.b,{className:"nav-item nav-link",to:"/addBus",children:"Add a Bus"}),Object(N.jsx)(i.b,{className:"nav-item nav-link",to:"/viewBuses",children:"View Buses"}),Object(N.jsx)(i.b,{className:"nav-item nav-link",to:"/all-bookings",children:"View Bookings"}),Object(N.jsx)(i.b,{className:"nav-item nav-link",to:"/logout",children:"Logout"})]})})]})})})}}]),s}(a.Component),C=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={show:!1,isAdmin:!1,isLoggedIn:!1},a.toggleMenu=a.toggleMenu.bind(Object(u.a)(a)),console.log(a.state.show),a}return Object(d.a)(s,[{key:"toggleMenu",value:function(){this.setState({show:!this.state.show})}},{key:"componentDidMount",value:function(){"admin"===localStorage.fname&&(console.log("Inside is Admin"),this.setState({isAdmin:!0})),1==localStorage.isLoggedIn&&(console.log("Inside is logged in"),this.setState({isLoggedIn:!0}))}},{key:"render",value:function(){var e=Object(N.jsx)("nav",{class:"navbar navbar-expand-md navbar-dark bg-dark mb-3 fixed-top",children:Object(N.jsxs)("div",{className:"container-fluid",children:[Object(N.jsxs)(i.b,{className:"navbar-brand mr-3",to:"/addBus",children:[Object(N.jsx)("img",{src:"static/bus.png",alt:"",width:"50px",height:"50px"})," "]}),Object(N.jsxs)("h3",{className:"navbar-brand mr-3",children:[" Hi ",localStorage.fname]}),Object(N.jsx)("button",{type:"button",class:"navbar-toggler",onClick:this.toggleMenu,children:Object(N.jsx)("span",{className:"navbar-toggler-icon"})}),Object(N.jsx)("div",{style:this.state.show?{display:"block"}:{display:"none"},className:"collapse navbar-collapse",children:Object(N.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(N.jsx)(i.b,{className:"nav-item nav-link",to:"/view-bookings",children:"View Bookings"}),Object(N.jsx)(i.b,{className:"nav-item nav-link",to:"/home",children:"Home"}),Object(N.jsx)(i.b,{className:"nav-item nav-link",to:"/logout",children:"Logout"})]})})]})}),t=Object(N.jsx)("nav",{class:"navbar navbar-expand-md navbar-dark bg-dark mb-3 fixed-top",children:Object(N.jsxs)("div",{className:"container-fluid",children:[Object(N.jsxs)(i.b,{className:"navbar-brand mr-3",to:"/home",children:[Object(N.jsx)("img",{src:"static/bus.png",alt:"",width:"50px",height:"50px"})," "]}),Object(N.jsx)("button",{type:"button",className:"navbar-toggler",onClick:this.toggleMenu,children:Object(N.jsx)("span",{className:"navbar-toggler-icon"})}),Object(N.jsx)("div",{style:this.state.show?{display:"block"}:{display:"none"},className:"collapse navbar-collapse",children:Object(N.jsxs)("div",{className:"navbar-nav ml-auto ",children:[Object(N.jsx)(i.b,{className:"nav-item nav-link",to:"/sign-in",children:"Login"}),Object(N.jsx)(i.b,{className:"nav-item nav-link",to:"/sign-up",children:"Sign up"})]})})]})});return Object(N.jsx)(N.Fragment,{children:this.state.isAdmin&&localStorage.isLoggedIn?Object(N.jsx)(w,{}):localStorage.isLoggedIn?e:t})}}]),s}(a.Component),I=s(226),D=s(89),B=s.n(D),T=(s(263),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return Object(N.jsxs)("div",{children:[Object(N.jsx)("span",{className:"pin-text",children:this.props.text}),Object(N.jsx)("div",{className:"pin"})]})}}]),s}(a.Component)),M=(s(264),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={source:"Select Source",destination:"Select Destination",operator:"",operatorsList:[],date:"",time:0,enable:!0,success:"",noTiketsMessage:"The Bus is full",marker_path:[],source_lat:0,source_lng:0,dest_lat:0,dest_lng:0,google:0,flightPath:0,temp:0,errors:{source:"",destination:"",operator:"",date:"",submit:""}},B.a.setApiKey("AIzaSyArSiBGE5n217Fcd9N59Y6yIynN6gyVSzM"),a.handleDateChange=a.handleDateChange.bind(Object(u.a)(a)),a.getOperator=a.getOperator.bind(Object(u.a)(a)),a.handleSourceChange=a.handleSourceChange.bind(Object(u.a)(a)),a.handleDestinationChange=a.handleDestinationChange.bind(Object(u.a)(a)),a.handleOperatorChange=a.handleOperatorChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.handleTimeChange=a.handleTimeChange.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"handleTimeChange",value:function(e){console.log(e),this.setState({time:e})}},{key:"componentDidMount",value:function(){null===localStorage.getItem("isLoggedIn")&&this.props.history.push("/")}},{key:"handleSourceChange",value:function(e){this.setState({source:e.target.value,date:"",operator:"",errors:{source:"",destination:"",submit:""}})}},{key:"handleSourceMarker",value:function(e){console.log("inside"),this.state.flightPath&&this.state.flightPath.setMap(null),e&&this.sourceHandler(e)}},{key:"handleDateChange",value:function(e){"Select Source"===this.state.source?this.setState({errors:{source:"Source cannot be empty",destination:""}}):"Select Destination"===this.state.destination?this.setState({errors:{source:"",destination:"Destionation cannot be empty"}}):(console.log("Value"),console.log(e),this.setState({date:new Date(e),operatorsList:[],operator:"",errors:{source:"",destination:""}}),console.log("Check"),console.log(this.state.date))}},{key:"getOperator",value:function(e){var t=this;e.preventDefault(),console.log("Get Operator"),console.log(this.state.date),function(e){return f.a.post(v+"getoperator",{source:e.source,destination:e.destination,date:e.date}).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e),e}))}({source:this.state.source,destination:this.state.destination,date:this.state.date}).then((function(e){if(200===e.status)if("No operators has seats available"===e.data.message||"No operators found"===e.data.message)console.log("Operator data1"),console.log(e.data),t.setState({operatorsList:[],enable:!0,errors:{source:"",destination:"",operator:"No operators has seats available. Select another date.",submit:""}});else{console.log("Operator data2"),console.log(e.data);var s=Object.keys(e.data).length;console.log(s),s<1?t.setState({operatorsList:[],enable:!0,errors:{operator:"No operator found",submit:""}}):(t.setState({enable:!1}),t.setState({operatorsList:e.data,operator:e.data[0].name+"/"+e.data[0].bustime,errors:{source:"",destination:"",operator:""}}))}}))}},{key:"handleDestinationChange",value:function(e){"Select Source"===this.state.source?this.setState({errors:{source:"Source cannot be empty",destination:""}}):this.state.source===e.target.value?this.setState({errors:{source:"",destination:"Destination cannot be same as source"}}):this.setState({destination:e.target.value,date:"",operator:"",errors:{source:"",destination:""}}),this.handleDestinationMarker(e.target.value)}},{key:"handleOperatorChange",value:function(e){console.log(e.target.key),this.setState({operator:e.target.value}),console.log("Operator Change:",this.state.operator)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(""),console.log(this.state.date),console.log(this.state.operator);var s="Select Source",a="Select Destination",n="",o="";if(this.state.source===s||this.state.destination===a||this.state.date===n||this.state.operator===o)this.setState({errors:{submit:"Select all the required fields"}});else{var r={email:localStorage.getItem("email"),source:this.state.source,destination:this.state.destination,date:this.state.date,operator:this.state.operator};console.log(r),function(e){return console.log("config"),console.log(x),f.a.post(v+"addbooking",{email:e.email,source:e.source,destination:e.destination,date:e.date,operator:e.operator},x).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))}(r).then((function(e){if(200===e.status)if("Operator not available"===e.data.message)t.setState({error:{source:"",destination:"",operator:e.data.message,operatorsList:[],submit:e.data.message}});else{var s=Object.keys(e.data).length;console.log(s),s<1&&t.setState({error:{source:"",destination:"",operator:"",operatorsList:[],submit:"No buses found"}}),t.setState({source:"Select Source",destination:"Select Destination",operator:"",operatorsList:[],date:"",marker_path:[],source_lat:0,source_lng:0,dest_lat:0,dest_lng:0,google:t.state.temp,flightPath:t.state.flightPath.setMap(null),enable:!0}),setTimeout((function(){return t.setState({success:"Booking done successfully"})}),1e3)}}))}}},{key:"sourceHandler",value:function(e){var t=this;B.a.fromAddress(e).then((function(e){var s=t.state.marker_path[0]=e.results[0].geometry.location,a=s.lat,n=s.lng;if(t.setState({source_lat:a,source_lng:n,marker_path:t.state.marker_path}),t.state.marker_path.length>1){t.setState({google:t.state.temp});var o=new t.state.google.maps.Polyline({path:t.state.marker_path,geodesic:!0,strokeColor:"red",strokeOpacity:1,strokeWeight:3});t.state.flightPath&&t.state.flightPath.setMap(null),o.setMap(t.state.google.map),t.setState({flightPath:o})}}),(function(e){console.error(e)}))}},{key:"destinationHandler",value:function(e){var t=this;B.a.fromAddress(e).then((function(e){var s=t.state.marker_path[1]=e.results[0].geometry.location,a=s.lat,n=s.lng;if(t.setState({dest_lat:a,dest_lng:n,marker_path:t.state.marker_path}),t.state.marker_path.length>1){t.setState({google:t.state.temp});var o=new t.state.google.maps.Polyline({path:t.state.marker_path,geodesic:!0,strokeColor:"red",strokeOpacity:1,strokeWeight:3});t.state.flightPath&&t.state.flightPath.setMap(null),o.setMap(t.state.google.map),t.setState({flightPath:o})}}),(function(e){console.error(e)}))}},{key:"handleDestinationMarker",value:function(e){this.state.flightPath&&(this.state.flightPath.setMap(null),this.state.flightPath.setPath([]),this.state.flightPath=null),e&&this.destinationHandler(e)}},{key:"render",value:function(){var e=this;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(C,{}),Object(N.jsx)("div",{className:"container m-auto marginconatiner",children:Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)("div",{className:"col-xs-6 col-md-6",children:Object(N.jsx)("div",{className:"jumbotron",children:Object(N.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(N.jsx)("h3",{children:"Bus Ticket Booking"}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsxs)("select",{className:"custom-select",value:this.state.source,onChange:function(t){e.handleSourceChange(t),e.handleSourceMarker(t.target.value)},required:!0,children:[Object(N.jsx)("option",{value:"destination",children:"Select Source"}),Object(N.jsx)("option",{value:"Boston",children:"Boston"}),Object(N.jsx)("option",{value:"New York",children:"New York"}),Object(N.jsx)("option",{value:"Pittsburgh",children:"Pittsburgh"}),Object(N.jsx)("option",{value:"Vermont",children:"Vermont"}),Object(N.jsx)("option",{value:"Maine",children:"Maine"})]}),""!==this.state.errors.source&&Object(N.jsx)("span",{className:"error",children:this.state.errors.source})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsxs)("select",{className:"custom-select",value:this.state.destination,onChange:function(t){e.handleDestinationChange(t),e.handleDestinationMarker(t.target.value)},required:!0,children:[Object(N.jsx)("option",{value:"destination",children:"Select Destination"}),Object(N.jsx)("option",{value:"Boston",children:"Boston"}),Object(N.jsx)("option",{value:"New York",children:"New York"}),Object(N.jsx)("option",{value:"Pittsburgh",children:"Pittsburgh"}),Object(N.jsx)("option",{value:"Vermont",children:"Vermont"}),Object(N.jsx)("option",{value:"Maine",children:"Maine"})]}),""!==this.state.errors.destination&&Object(N.jsx)("span",{className:"error",children:this.state.errors.destination})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)(g.a,{className:"custom-select",value:this.state.date,selected:this.state.date,onChange:this.handleDateChange,minDate:p()().toDate(),required:!0}),""!==this.state.errors.date&&Object(N.jsx)("span",{className:"error",children:this.state.errors.date}),Object(N.jsx)("button",{onClick:this.getOperator,className:"btn btn-secondary btn-block",children:"Get Operators"}),Object(N.jsx)("select",{id:"operator",className:"custom-select",value:this.state.operator,onChange:this.handleOperatorChange,disabled:this.state.enable,required:!0,children:Object.keys(this.state.operatorsList).map((function(t,s){return e.state.operatorsList[s].quantity>=1?Object(N.jsx)("option",{value:e.state.operatorsList[s].name+"/"+e.state.operatorsList[s].bustime,children:e.state.operatorsList[s].name+" "+e.state.operatorsList[s].bustime},s):null}))}),""!==this.state.errors.operator&&Object(N.jsx)("span",{className:"error",children:this.state.errors.operator})]}),Object(N.jsx)("button",{type:"submit",className:"btn btn-secondary btn-block",value:"Submit",children:"Book"}),""!==this.state.errors.submit&&Object(N.jsx)("span",{className:"error",children:this.state.errors.submit}),""!==this.state.success&&Object(N.jsx)("span",{className:"success",children:this.state.success})]})})}),Object(N.jsx)("div",{class:"col-xs-6 col-md-6",children:Object(N.jsx)("div",{className:"iframe-container",children:Object(N.jsx)("div",{children:Object(N.jsxs)(I.a,{bootstrapURLKeys:{key:"AIzaSyArSiBGE5n217Fcd9N59Y6yIynN6gyVSzM"},defaultCenter:{lat:42.361145,lng:-71.057083},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){return e.setState({google:t,temp:t})},defaultZoom:5,children:[this.state.source&&this.state.source_lat&&this.state.source_lng&&Object(N.jsx)(T,{lat:this.state.source_lat,lng:this.state.source_lng,text:"S"}),this.state.destination&&this.state.dest_lat&&this.state.dest_lng&&Object(N.jsx)(T,{lat:this.state.dest_lat,lng:this.state.dest_lng,text:"D"})]})})})})]})})]})}}]),s}(a.Component)),E=s(43);var P={headers:{Authorization:"Bearer "+function(){if("undefined"!==typeof Storage)try{return JSON.parse(localStorage.getItem("twtr:auth")).access}catch(e){console.log(e)}}()}},L=RegExp(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/),_=function(e){var t=!0;return Object.values(e).forEach((function(e){return e.length>0&&(t=!1)})),t},q=function(e){var t=0;return Object.values(e).forEach((function(e){return e.length>0&&(t+=1)})),t};var U=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).goToSignUp=function(e){e.preventDefault(),a.props.history.push("/sign-up")},a.handleChange=function(e){e.preventDefault();var t=e.target,s=t.name,n=t.value,o=a.state.errors;switch(s){case"email":o.email=L.test(n)?"":"Email is not valid!";break;case"password":o.password=n.length<8?"Password must be 8 characters long!":""}a.setState(Object(E.a)({errors:o},s,n))},a.handleSubmit=function(e){e.preventDefault(),a.setState({formValid:_(a.state.errors)}),a.setState({errorCount:q(a.state.errors)});var t,s={email:a.state.email,password:a.state.password};(t=s,f.a.post("/app/signin",{email:t.email,password:t.password}).then((function(e){return console.log(e),200===e.status&&"User logged in successfully"===e.data.message&&(localStorage.setItem("isLoggedIn",e.data.isLoggedIn),localStorage.setItem("fname",e.data.fname),localStorage.setItem("lname",e.data.lname),localStorage.setItem("email",e.data.email)),e})).catch((function(e){return console.log(e),{message:"error"}}))).then((function(e){if(console.log("print res"),console.log(e),200===e.status){var t=e.data.message;t.includes("Incorrect email address")?a.setState({errors:{email:t,password:""}}):t.includes("Incorrect password")?a.setState({errors:{email:"",password:t}}):t.includes("No user found")?alert("No user found. Try signing up."):(!function(e){if("undefined"!==typeof Storage)try{localStorage.setItem("twtr:auth",JSON.stringify(e))}catch(t){console.log(t)}}({access:e.data.access_token,refresh:e.data.refresh_token}),a.props.history.push("/home"))}else alert("Server Error!")}))},a.state={email:null,password:null,errors:{email:"",password:""}},a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){null!==localStorage.getItem("isLoggedIn")&&this.props.history.push("/home")}},{key:"render",value:function(){var e=this.state.errors;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(C,{}),Object(N.jsx)("div",{class:"container",children:Object(N.jsx)("div",{class:"jumbotron",children:Object(N.jsxs)("form",{onSubmit:this.handleSubmit,noValidate:!0,children:[Object(N.jsx)("h3",{children:"Sign In"}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Email address"}),Object(N.jsx)("input",{type:"email",name:"email",className:"form-control",placeholder:"Enter email",onChange:this.handleChange,noValidate:!0,required:!0}),e.email.length>0&&Object(N.jsx)("span",{className:"error",children:e.email})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Password"}),Object(N.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Enter password",onChange:this.handleChange,noValidate:!0,required:!0}),e.password.length>0&&Object(N.jsx)("span",{className:"error",children:e.password})]}),Object(N.jsx)("div",{className:"info",children:Object(N.jsx)("small",{children:"Password must be eight characters in length."})}),Object(N.jsx)("button",{type:"submit",className:"btn btn-secondary btn-block",children:"Submit"})]})})})]})}}]),s}(a.Component),F=RegExp(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/),V=RegExp(/^\w+([.-]?\w+)+$/),A=function(e){var t=!0;return Object.values(e).forEach((function(e){return e.length>0&&(t=!1)})),t},H=function(e){var t=0;return Object.values(e).forEach((function(e){return e.length>0&&(t+=1)})),t},K=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).handleChange=function(e){e.preventDefault();var t=e.target,s=t.name,n=t.value,o=a.state.errors;switch(s){case"fname":o.fname=V.test(n)?"":"No special characters or numbers allowed";break;case"lname":o.lname=V.test(n)?"":"No special characters or numbers allowed";break;case"email":o.email=F.test(n)?"":"Email is not valid!";break;case"password":o.password=n.length<8?"Password must be 8 characters long!":"";break;case"repassword":o.repassword=n!==a.state.password?"Password does not match!":""}a.setState(Object(E.a)({errors:o},s,n))},a.handleSubmit=function(e){e.preventDefault(),a.setState({formValid:A(a.state.errors)}),a.setState({errorCount:H(a.state.errors)});var t,s={fname:a.state.fname,lname:a.state.lname,email:a.state.email,password:a.state.password};console.log("submit"),console.log(s),(t=s,f.a.post("/app/signup",{fname:t.fname,lname:t.lname,email:t.email,password:t.password}).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e),{message:"new error"}}))).then((function(e){console.log(e),200===e.status?e.data.message.includes("User added successfully")?a.props.history.push("/sign-in"):a.setState({errors:{fname:"",lname:"",email:e.data.message,password:""}}):alert("Server Error!")}))},a.state={formValid:!1,fname:null,lname:null,email:null,password:null,repassword:null,errors:{fname:"",lname:"",email:"",password:"",repassword:""}},a}return Object(d.a)(s,[{key:"render",value:function(){var e=this.state,t=e.errors,s=e.formValid;return Object(N.jsx)("div",{class:"container",children:Object(N.jsx)("div",{class:"jumbotron",children:Object(N.jsxs)("form",{onSubmit:this.handleSubmit,noValidate:!0,children:[Object(N.jsx)("h3",{children:"Sign Up"}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"First name"}),Object(N.jsx)("input",{type:"text",className:"form-control",placeholder:"First name",name:"fname",onChange:this.handleChange,noValidate:!0,required:!0}),t.fname.length>0&&Object(N.jsx)("span",{className:"error",children:t.fname})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Last name"}),Object(N.jsx)("input",{type:"text",className:"form-control",placeholder:"Last name",name:"lname",onChange:this.handleChange,noValidate:!0,required:!0}),t.lname.length>0&&Object(N.jsx)("span",{className:"error",children:t.lname})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Email address"}),Object(N.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",name:"email",onChange:this.handleChange,noValidate:!0,required:!0}),t.email.length>0&&Object(N.jsx)("span",{className:"error",children:t.email})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Password"}),Object(N.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",name:"password",onChange:this.handleChange,noValidate:!0,required:!0}),t.password.length>0&&Object(N.jsx)("span",{className:"error",children:t.password})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Re-Enter Password"}),Object(N.jsx)("input",{type:"password",className:"form-control",placeholder:"Re-Enter password",name:"repassword",onChange:this.handleChange,noValidate:!0,required:!0}),t.repassword.length>0&&Object(N.jsx)("span",{className:"error",children:t.repassword})]}),Object(N.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"}),null!==this.state.errorCount?Object(N.jsxs)("p",{className:"form-status",children:["Form is ",s?"valid \u2705":"invalid \u274c"]}):"Form not submitted",Object(N.jsxs)("p",{className:"forgot-password text-right",children:[Object(N.jsx)(i.b,{className:"nav-link",to:"/sign-in",children:"Already registered? Sign in"}),Object(N.jsx)(c.c,{children:Object(N.jsx)(c.a,{path:"/sign-in",component:U})})]})]})})})}}]),s}(a.Component),R=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"componentDidMount",value:function(){if("undefined"!==typeof Storage)try{localStorage.removeItem("twtr:auth")}catch(e){console.log(e)}localStorage.removeItem("isLoggedIn"),localStorage.removeItem("email"),localStorage.removeItem("fname"),this.props.history.push("/sign-in")}},{key:"render",value:function(){return Object(N.jsx)("div",{children:"Logged Out"})}}]),s}(a.Component),z=(s(125),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={bookings:[],message:"",success:"",present:!1},a.handleSearchKeyUp=a.keyUpHandler.bind(),a.deleteBooking=a.deleteBooking.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"deleteBooking",value:function(e){var t=this;console.log(e.target.value);var s=e.target.value;s=s.split(",");var a,n={email:localStorage.getItem("email"),operator:s[0],source:s[1],destination:s[2],date:s[3],bustime:s[4]};console.log(n),(a=n,f.a.post(v+"delete",{email:localStorage.getItem("email"),source:a.source,destination:a.destination,date:a.date,operator:a.operator,bustime:a.bustime},x).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))).then((function(e){if(200===e.status)if("No bookings found"===e.data.message)t.setState({message:e.data.message,present:!1});else{console.log(t.state.bookings),t.setState({success:e.data.message});y().then((function(e){200===e.status?null===e.data?(console.log("Test1"),t.setState({message:"",present:!1})):"No bookings found"===e.data.message?(console.log("Test1"),t.setState({message:e.data.message,present:!1})):t.setState({message:"Data Present",bookings:e.data,present:!0}):(console.log("Test2"),t.setState({message:"",present:!1}))}))}else t.setState({message:"",present:!1})}))}},{key:"keyUpHandler",value:function(){var e,t,s,a;for(e=document.getElementById("myInput").value.toUpperCase(),t=document.getElementById("listbookings").getElementsByTagName("a"),console.log(t),a=0;a<t.length;a++)(s=t[a].getElementsByTagName("div")[1])&&((s.textContent||s.innerText).toUpperCase().indexOf(e)>-1?t[a].style.display="":t[a].style.display="none")}},{key:"componentDidMount",value:function(){var e=this;null===localStorage.getItem("isLoggedIn")&&this.props.history.push("/");y().then((function(t){200===t.status?null===t.data?(console.log("Test1"),e.setState({message:"",present:!1})):"No bookings found"===t.data.message?(console.log("Test1"),e.setState({message:t.data.message,present:!1})):e.setState({message:"Data Present",bookings:t.data,present:!0}):(console.log("Test2"),e.setState({message:"",present:!1}))}))}},{key:"render",value:function(){var e=this;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(C,{}),Object(N.jsxs)("div",{class:"container",children:[Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("input",{type:"text",id:"myInput",onKeyUp:this.handleSearchKeyUp,placeholder:"Search for names..",title:"Type in a operator name"}),""!==this.state.success&&Object(N.jsx)("span",{className:"success",children:this.state.success}),Object(N.jsx)("div",{class:"list-group ",id:"listbookings",children:Object.keys(this.state.bookings).map((function(t,s){return Object(N.jsxs)("a",{href:"#",class:"list-group-item list-group-item-action flex-column align-items-start mt-2 table-striped ",children:[Object(N.jsxs)("div",{class:"d-flex w-100 justify-content-between",children:[Object(N.jsx)("h5",{class:"mb-1",children:e.state.bookings[s].source+" to "+e.state.bookings[s].destination}),Object(N.jsx)("button",{type:"button",class:"btn btn-dark",value:e.state.bookings[s].operator+","+e.state.bookings[s].source+","+e.state.bookings[s].destination+","+e.state.bookings[s].date+","+e.state.bookings[s].bustime,onClick:e.deleteBooking,children:"Cancel Booking"})]}),Object(N.jsx)("div",{class:"mb-1  ",children:"Operator : "+e.state.bookings[s].operator}),Object(N.jsx)("div",{class:"mb-1 ",children:"Travel Date : "+e.state.bookings[s].date.substring(0,10)}),Object(N.jsx)("div",{class:"mb-1 ",children:"Bus Time : "+e.state.bookings[s].bustime})]})}))})]})]})}}]),s}(a.Component)),G=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){return Object(l.a)(this,s),t.call(this,e)}return Object(d.a)(s,[{key:"render",value:function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(C,{}),Object(N.jsx)("div",{class:"container",children:Object(N.jsx)("h3",{style:{color:"red"},children:"Page doesn't exist"})})]})}}]),s}(a.Component),Y=(RegExp(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,})+$/),RegExp(/^\w+([.-]?\w+)+$/)),J=(RegExp(),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleChange1=function(e){e.preventDefault();var t=e.target,s=t.name,n=t.value,o=a.state.errors;switch(s){case"name":o.name=Y.test(n)?"":"No special characters or numbers allowed";break;case"adSource":o.adSource=Y.test(n)?"":"No special characters or numbers allowed";break;case"adDestination":o.adDestination=Y.test(n)?"":"No special characters or numbers allowed"}a.setState(Object(E.a)({errors:o},s,n))},a.handleSubmit=function(e){e.preventDefault(),console.log("Add Bus clicked");var t,s={name:a.state.name,source:a.state.source,destination:a.state.destination,date:a.state.date,bustime:a.state.bustime,quantity:a.state.quantity,cost:a.state.cost};(t=s,f.a.post("/app/addbus",{busId:t.busId,name:t.name,source:t.source,destination:t.destination,date:t.date,time:t.bustime,quantity:t.quantity,cost:t.cost},P).then((function(e){return console.log(e),e})).catch((function(e){return console.log(e),{message:"new error"}}))).then((function(e){console.log(e),200===e.status?e.data.message.includes("Bus added successfully")?(console.log("Bus added"),a.setState({name:"",source:"",destination:"",date:"",bustime:"",quantity:"",cost:""})):(a.setState({errors:{busId:"",name:"",source:"",destination:"",date:"",bustime:"",quantity:""}}),setTimeout((function(){return a.setState({success:"Booking done successfully"})}),500)):alert("Server Error!")}))},a.state={busId:"",name:"",date:"",time:"",source:"",destination:"",quantity:"",cost:"",success:"",errors:{busId:"",name:"",source:"",destination:"",quantity:"",submit:""}},a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.handleChangeId=a.handleChangeId.bind(Object(u.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(u.a)(a)),a.handleTimeChange=a.handleTimeChange.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){}},{key:"handleTimeChange",value:function(e){console.log(e),this.setState({time:e})}},{key:"handleDateChange",value:function(e){this.setState({date:new Date(e)}),console.log("Check"),console.log(this.state.date)}},{key:"handleChangeId",value:function(e){this.setState({busId:e.target.value}),console.log(this.state.busId)}},{key:"render",value:function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(C,{}),Object(N.jsx)("div",{class:"container",children:Object(N.jsx)("div",{class:"jumbotron",children:Object(N.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(N.jsx)("h3",{children:"Admin Add Bus"}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"ad-operator",children:"Bus Operator"}),Object(N.jsx)("input",{type:"text",className:"form-control",id:"ad-operator",name:"name",value:this.state.name,onChange:this.handleChange})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"ad-source",children:"Source"}),Object(N.jsx)("input",{type:"text",className:"form-control",id:"ad-source",name:"source",value:this.state.source,onChange:this.handleChange})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"ad-destination",children:"Destination"}),Object(N.jsx)("input",{type:"text",className:"form-control",id:"ad-destination",name:"destination",value:this.state.destination,onChange:this.handleChange})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Date"}),Object(N.jsx)(g.a,{className:"custom-select",value:this.state.date,selected:this.state.date,onChange:this.handleDateChange,minDate:p()().toDate(),required:!0})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"bus-time",children:"Bus Time"}),Object(N.jsx)("input",{type:"text",className:"form-control",id:"bus-time",name:"bustime",value:this.state.bustime,onChange:this.handleChange})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"ad-seats",children:"Seats"}),Object(N.jsx)("input",{type:"number",className:"form-control",id:"ad-seats",min:"15",max:"80",name:"quantity",value:this.state.quantity,onChange:this.handleChange})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"cost",children:"Cost"}),Object(N.jsx)("input",{type:"text",className:"form-control",id:"cost",name:"cost",value:this.state.cost,onChange:this.handleChange})]}),Object(N.jsx)("button",{type:"submit",className:"btn btn-secondary btn-block",value:"Submit",children:"Add Bus"}),""!==this.state.errors.submit&&Object(N.jsx)("span",{className:"error",children:this.state.errors.submit}),""!==this.state.success&&Object(N.jsx)("span",{className:"success",children:this.state.success})]})})})]})}}]),s}(a.Component)),$=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={buses:[],message:"",success:"",present:!1},a.handleSearchKeyUp=a.keyUpHandler.bind(),a.deleteBus=a.deleteBus.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"keyUpHandler",value:function(){var e,t,s,a;for(e=document.getElementById("myInput").value.toUpperCase(),t=document.getElementById("listbuses").getElementsByTagName("a"),console.log(t),a=0;a<t.length;a++)(s=t[a].getElementsByTagName("div")[1])&&((s.textContent||s.innerText).toUpperCase().indexOf(e)>-1?t[a].style.display="":t[a].style.display="none")}},{key:"componentDidMount",value:function(){var e=this;null===localStorage.getItem("isLoggedIn")&&this.props.history.push("/");k().then((function(t){200===t.status?null===t.data?(console.log("Test1"),e.setState({message:"",present:!1})):"No buses found"===t.data.message?(console.log("Test1"),e.setState({message:t.data.message,present:!1})):e.setState({message:"Data Present",buses:t.data,present:!0}):(console.log("Test2"),e.setState({message:"",present:!1}))}))}},{key:"deleteBus",value:function(e){var t=this;console.log(e.target.value);var s,a=e.target.value,n={name:(a=a.split(","))[0],source:a[1],destination:a[2],date:a[3],bustime:a[4],cost:a[5],quantity:a[6]};console.log(n),(s=n,f.a.post(v+"deletebus",{source:s.source,destination:s.destination,date:s.date,name:s.name,bustime:s.bustime,cost:s.cost,quantity:s.quantity}).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))).then((function(e){if(200===e.status)if("No buses found"===e.data.message)t.setState({message:e.data.message,present:!1});else{console.log(t.state.buses),t.setState({success:e.data.message});k().then((function(e){200===e.status?null===e.data?(console.log("Test1"),t.setState({message:"",present:!1})):"No buses found"===e.data.message?(console.log("Test1"),t.setState({message:e.data.message,present:!1})):t.setState({message:"Data Present",buses:e.data,present:!0}):(console.log("Test2"),t.setState({message:"",present:!1}))}))}else t.setState({message:"",present:!1})}))}},{key:"render",value:function(){var e=this;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(C,{}),Object(N.jsxs)("div",{class:"container",children:[Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("input",{type:"text",id:"myInput",onKeyUp:this.handleSearchKeyUp,placeholder:"Search for names..",title:"Type in a operator name"}),""!==this.state.success&&Object(N.jsx)("span",{className:"success",children:this.state.success}),Object(N.jsx)("div",{class:"list-group ",id:"listbuses",children:Object.keys(this.state.buses).map((function(t,s){return Object(N.jsxs)("a",{href:"#",class:"list-group-item list-group-item-action flex-column align-items-start mt-2 table-striped ",children:[Object(N.jsxs)("div",{class:"d-flex w-100 justify-content-between",children:[Object(N.jsx)("h5",{class:"mb-1",children:e.state.buses[s].source+" to "+e.state.buses[s].destination}),Object(N.jsx)("button",{type:"button",class:"btn btn-dark",value:e.state.buses[s].name+","+e.state.buses[s].source+","+e.state.buses[s].destination+","+e.state.buses[s].date+","+e.state.buses[s].bustime+","+e.state.buses[s].cost+","+e.state.buses[s].quantity,onClick:e.deleteBus,children:"Delete"})]}),Object(N.jsx)("div",{class:"mb-1  ",children:"Operator : "+e.state.buses[s].name}),Object(N.jsx)("div",{class:"mb-1 ",children:"Travel Date : "+e.state.buses[s].date.substring(0,10)}),Object(N.jsx)("div",{class:"mb-1 ",children:"Bus Time : "+e.state.buses[s].bustime})]})}))})]})]})}}]),s}(a.Component),W=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={bookings:[],message:"",success:"",present:!1},a.handleSearchKeyUp=a.keyUpHandler.bind(),a.adminDeleteBooking=a.adminDeleteBooking.bind(Object(u.a)(a)),a}return Object(d.a)(s,[{key:"adminDeleteBooking",value:function(e){var t=this;console.log(e.target.value),console.log("Inside admin delete");var s,a=e.target.value,n={operator:(a=a.split(","))[0],source:a[1],destination:a[2],date:a[3],bustime:a[4],email:a[5]};console.log(n),(s=n,f.a.post(v+"admindelete",{email:s.email,source:s.source,destination:s.destination,date:s.date,operator:s.operator,bustime:s.bustime},x).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))).then((function(e){if(200===e.status)if("No bookings found"===e.data.message)t.setState({message:e.data.message,present:!1});else{console.log(t.state.bookings),t.setState({success:e.data.message});S().then((function(e){200===e.status?null===e.data?(console.log("Test1"),t.setState({message:"",present:!1})):"No bookings found"===e.data.message?(console.log("Test1"),t.setState({message:e.data.message,present:!1})):t.setState({message:"Data Present",bookings:e.data,present:!0}):(console.log("Test2"),t.setState({message:"",present:!1}))}))}else t.setState({message:"",present:!1})}))}},{key:"keyUpHandler",value:function(){var e,t,s,a;for(e=document.getElementById("myInput").value.toUpperCase(),t=document.getElementById("listbookings").getElementsByTagName("a"),console.log(t),a=0;a<t.length;a++)(s=t[a].getElementsByTagName("div")[1])&&((s.textContent||s.innerText).toUpperCase().indexOf(e)>-1?t[a].style.display="":t[a].style.display="none")}},{key:"componentDidMount",value:function(){var e=this;null===localStorage.getItem("isLoggedIn")&&this.props.history.push("/");S().then((function(t){200===t.status?null===t.data?(console.log("Test1"),e.setState({message:"",present:!1})):"No bookings found"===t.data.message?(console.log("Test1"),e.setState({message:t.data.message,present:!1})):e.setState({message:"Data Present",bookings:t.data,present:!0}):(console.log("Test2"),e.setState({message:"",present:!1}))}))}},{key:"render",value:function(){var e=this;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(C,{}),Object(N.jsxs)("div",{class:"container",children:[Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("input",{type:"text",id:"myInput",onKeyUp:this.handleSearchKeyUp,placeholder:"Search for names..",title:"Type in a operator name"}),""!==this.state.success&&Object(N.jsx)("span",{className:"success",children:this.state.success}),Object(N.jsx)("div",{class:"list-group ",id:"listbookings",children:Object.keys(this.state.bookings).map((function(t,s){return Object(N.jsxs)("a",{href:"#",class:"list-group-item list-group-item-action flex-column align-items-start mt-2 table-striped ",children:[Object(N.jsxs)("div",{class:"d-flex w-100 justify-content-between",children:[Object(N.jsx)("h5",{class:"mb-1",children:e.state.bookings[s].source+" to "+e.state.bookings[s].destination}),Object(N.jsx)("button",{type:"button",class:"btn btn-dark",value:e.state.bookings[s].operator+","+e.state.bookings[s].source+","+e.state.bookings[s].destination+","+e.state.bookings[s].date+","+e.state.bookings[s].bustime+","+e.state.bookings[s].email,onClick:e.adminDeleteBooking,children:"Delete"})]}),Object(N.jsx)("div",{class:"mb-1  ",children:"Operator : "+e.state.bookings[s].operator}),Object(N.jsx)("div",{class:"mb-1  ",children:"Email : "+e.state.bookings[s].email}),Object(N.jsx)("div",{class:"mb-1 ",children:"Travel Date : "+e.state.bookings[s].date.substring(0,10)}),Object(N.jsx)("div",{class:"mb-1 ",children:"Bus Time : "+e.state.bookings[s].bustime})]})}))})]})]})}}]),s}(a.Component);var Z=function(){return Object(N.jsx)("div",{className:"App",children:Object(N.jsxs)(i.a,{children:[Object(N.jsx)(C,{}),Object(N.jsxs)(c.c,{children:[Object(N.jsx)(c.a,{exact:!0,path:"/",component:U}),Object(N.jsx)(c.a,{exact:!0,path:"/view-bookings",component:z}),Object(N.jsx)(c.a,{exact:!0,path:"/home",component:M}),Object(N.jsx)(c.a,{exact:!0,path:"/admin",component:w}),Object(N.jsx)(c.a,{exact:!0,path:"/sign-in",component:U}),Object(N.jsx)(c.a,{exact:!0,path:"/sign-up",component:K}),Object(N.jsx)(c.a,{path:"/admin",component:w}),Object(N.jsx)(c.a,{path:"/addBus",component:J}),Object(N.jsx)(c.a,{path:"/viewBuses",component:$}),Object(N.jsx)(c.a,{exact:!0,path:"/all-bookings",component:W}),Object(N.jsx)(c.a,{exact:!0,path:"/logout",component:R}),Object(N.jsx)(c.a,{path:"/",component:G})]})]})})},Q=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,546)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),o(e),r(e)}))};r.a.render(Object(N.jsx)(n.a.StrictMode,{children:Object(N.jsx)(Z,{})}),document.getElementById("root")),Q()},62:function(e,t,s){}},[[543,1,2]]]);
//# sourceMappingURL=main.f8171e78.chunk.js.map